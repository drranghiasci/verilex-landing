(()=>{var a={};a.id=891,a.ids=[220,636,891],a.modules={361:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},2015:a=>{"use strict";a.exports=require("react")},2326:a=>{"use strict";a.exports=require("react-dom")},3873:a=>{"use strict";a.exports=require("path")},3939:a=>{"use strict";a.exports=require("@supabase/supabase-js")},4075:a=>{"use strict";a.exports=require("zlib")},6060:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external.js")},7910:a=>{"use strict";a.exports=require("stream")},8732:a=>{"use strict";a.exports=require("react/jsx-runtime")},8905:(a,b,c)=>{"use strict";c.r(b),c.d(b,{config:()=>x,default:()=>t,getServerSideProps:()=>w,getStaticPaths:()=>v,getStaticProps:()=>u,handler:()=>F,reportWebVitals:()=>y,routeModule:()=>E,unstable_getServerProps:()=>C,unstable_getServerSideProps:()=>D,unstable_getStaticParams:()=>B,unstable_getStaticPaths:()=>A,unstable_getStaticProps:()=>z});var d={};c.r(d),c.d(d,{default:()=>r});var e=c(2636),f=c(4850),g=c(3410),h=c(9382),i=c(2627),j=c(8732),k=c(9247),l=c.n(k),m=c(953),n=c.n(m),o=c(2015),p=c(484),q=c(6955);function r(){let{state:a,refresh:b}=(0,q._)(),[c,d]=(0,o.useState)(null),[e,f]=(0,o.useState)([]),[g,h]=(0,o.useState)(null),i=async a=>{let{data:b}=await p.N.from("firm_members").select("firm_id, role").eq("user_id",a).limit(1),c=Array.isArray(b)&&b.length>0?b[0]:null;return c?.firm_id??null},k=async()=>{d("Claimingâ€¦");try{let{error:c}=await p.N.rpc("claim_firm_membership");if(c){if(c.message.includes("No pending invite found")&&(await b(),a.userId?await i(a.userId):null))return void d("Claimed");d(`Error: ${c.message}`);return}await b(),d("Claimed")}catch(a){console.error("Claim firm access failed",a),d(`Error: ${a instanceof Error?a.message:"Unable to claim access."}`)}};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(l(),{children:(0,j.jsx)("title",{children:"MyClient"})}),(0,j.jsxs)("div",{className:"mx-auto max-w-6xl space-y-8",children:[(0,j.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,j.jsx)("h1",{className:"text-2xl font-semibold text-[color:var(--text)]",children:"Dashboard"}),(0,j.jsx)("p",{className:"text-sm text-[color:var(--muted)]",children:"Overview of your firm workspace."})]}),a.firmId?(0,j.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[1.2fr_1fr]",children:[(0,j.jsxs)("div",{className:"rounded-2xl border border-[color:var(--border)] bg-[var(--surface-1)] p-8 shadow-sm",children:[(0,j.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Today's Snapshot"}),(0,j.jsx)("p",{className:"mt-3 text-[color:var(--muted)]",children:"Your firm's latest activity and workload trends will appear here soon."}),(0,j.jsx)("div",{className:"mt-6 grid gap-4 sm:grid-cols-2",children:["Active Cases","Upcoming Deadlines","Client Messages","Documents Reviewed"].map(a=>(0,j.jsxs)("div",{className:"rounded-2xl border border-[color:var(--border)] bg-[var(--surface-0)] px-4 py-3 text-sm text-[color:var(--muted)]",children:[(0,j.jsx)("p",{className:"text-white",children:a}),(0,j.jsx)("p",{className:"mt-2 text-[color:var(--muted-2)]",children:"Coming soon"})]},a))})]}),(0,j.jsxs)("div",{className:"space-y-6",children:[(0,j.jsxs)("div",{className:"rounded-2xl border border-[color:var(--border)] bg-[var(--surface-1)] p-8 shadow-sm",children:[(0,j.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Quick Actions"}),(0,j.jsx)("div",{className:"mt-6 grid gap-4",children:[{label:"Active Cases",href:"/myclient/cases"},{label:"New Case Intake",href:"/myclient/intake"},{label:"Documents",href:"/myclient/documents"},{label:"Members",href:"/myclient/members"},{label:"Profile",href:"/myclient/profile"},{label:"Activity",href:"/myclient/activity"}].map(a=>(0,j.jsx)(n(),{href:a.href,className:"rounded-2xl border border-[color:var(--border)] bg-[var(--surface-0)] px-4 py-3 text-sm text-[color:var(--text)] hover:bg-white/10 transition",children:(0,j.jsx)("div",{className:"font-medium text-white",children:a.label})},a.label))})]}),(0,j.jsxs)("div",{className:"rounded-2xl border border-[color:var(--border)] bg-[var(--surface-1)] p-6 shadow-sm",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Open Tasks"}),(0,j.jsx)(n(),{href:"/myclient/cases",className:"text-xs text-[color:var(--muted)] hover:text-white transition",children:"View cases"})]}),g&&(0,j.jsx)("p",{className:"mt-3 text-xs text-red-300",children:g}),0===e.length?(0,j.jsx)("p",{className:"mt-4 text-sm text-[color:var(--muted)]",children:"No open tasks."}):(0,j.jsx)("ul",{className:"mt-4 space-y-3 text-sm text-[color:var(--muted)]",children:e.map(a=>(0,j.jsx)("li",{className:"rounded-xl border border-[color:var(--border)] bg-[var(--surface-0)] px-3 py-2",children:(0,j.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,j.jsx)("p",{className:"text-white",children:a.title}),(0,j.jsxs)("div",{className:"flex items-center gap-2 text-xs text-[color:var(--muted-2)]",children:[a.due_date&&(0,j.jsxs)("span",{children:["Due ",new Date(a.due_date).toLocaleDateString()]}),(0,j.jsx)(n(),{href:`/myclient/cases/${a.case_id}`,className:"hover:text-white",children:"View case"})]})]})},a.id))}),a.role&&("admin"===a.role||"attorney"===a.role)&&(0,j.jsx)("p",{className:"mt-3 text-xs text-[color:var(--muted-2)]",children:"Add tasks from within a case."})]})]})]}):(0,j.jsxs)("div",{className:"rounded-2xl border border-[color:var(--border)] bg-[var(--surface-1)] p-8 text-center shadow-sm",children:[(0,j.jsx)("h2",{className:"text-2xl font-semibold text-white",children:"No firm linked yet"}),(0,j.jsx)("p",{className:"mt-3 text-[color:var(--muted)]",children:"We're finalizing your access. If you're stuck, finalize firm access below."}),(0,j.jsx)("button",{onClick:k,className:"mt-6 inline-flex items-center justify-center rounded-lg border border-[color:var(--border)] px-4 py-2 font-semibold text-white hover:bg-white/10 transition",children:"Finalize Firm Access"}),c&&(0,j.jsx)("p",{className:`mt-4 text-sm ${c.startsWith("Error")?"text-red-300":"Claimed"===c?"text-green-300":"text-[color:var(--muted)]"}`,children:c})]}),a.error&&(0,j.jsxs)("p",{className:"text-sm text-red-300",children:["Error: ",a.error]})]})]})}var s=c(6104);let t=(0,g.M)(d,"default"),u=(0,g.M)(d,"getStaticProps"),v=(0,g.M)(d,"getStaticPaths"),w=(0,g.M)(d,"getServerSideProps"),x=(0,g.M)(d,"config"),y=(0,g.M)(d,"reportWebVitals"),z=(0,g.M)(d,"unstable_getStaticProps"),A=(0,g.M)(d,"unstable_getStaticPaths"),B=(0,g.M)(d,"unstable_getStaticParams"),C=(0,g.M)(d,"unstable_getServerProps"),D=(0,g.M)(d,"unstable_getServerSideProps"),E=new e.PagesRouteModule({definition:{kind:f.RouteKind.PAGES,page:"/myclient/app",pathname:"/myclient/app",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:i.default,Document:h.default},userland:d}),F=(0,s.U)({srcPage:"/myclient/app",config:x,userland:d,routeModule:E,getStaticPaths:v,getStaticProps:u,getServerSideProps:w})},9021:a=>{"use strict";a.exports=require("fs")},9247:(a,b,c)=>{a.exports=c(6186)},9382:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>f});var d=c(8732),e=c(6030);function f(){return(0,d.jsxs)(e.Html,{lang:"en",children:[(0,d.jsx)(e.Head,{children:(0,d.jsx)("link",{rel:"icon",href:"/favicon.svg",type:"image/svg+xml"})}),(0,d.jsxs)("body",{children:[(0,d.jsx)(e.Main,{}),(0,d.jsx)(e.NextScript,{})]})]})}}};var b=require("../../webpack-runtime.js");b.C(a);var c=b.X(0,[978,708,30,791,627],()=>b(b.s=8905));module.exports=c})();