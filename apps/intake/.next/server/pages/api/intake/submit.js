"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/intake/submit";
exports.ids = ["pages/api/intake/submit"];
exports.modules = {

/***/ "(api-node)/../../lib/intake/normalizePayload.ts":
/*!********************************************!*\
  !*** ../../lib/intake/normalizePayload.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   normalizePayloadToDocxV1: () => (/* binding */ normalizePayloadToDocxV1)\n/* harmony export */ });\n/* harmony import */ var _schema_gaDivorceCustodyV1__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./schema/gaDivorceCustodyV1 */ \"(api-node)/../../lib/intake/schema/gaDivorceCustodyV1.ts\");\n\nconst canonicalKeys = new Set(_schema_gaDivorceCustodyV1__WEBPACK_IMPORTED_MODULE_0__.GA_DIVORCE_CUSTODY_V1.sections.flatMap((section)=>section.fields.map((field)=>field.key)));\nfunction isPlainObject(value) {\n    return Boolean(value) && typeof value === 'object' && !Array.isArray(value);\n}\nfunction toTrimmedString(value) {\n    if (typeof value !== 'string') return undefined;\n    const trimmed = value.trim();\n    return trimmed.length > 0 ? trimmed : undefined;\n}\nfunction buildAddressValue(value, extras) {\n    const address = {};\n    if (isPlainObject(value)) {\n        const record = value;\n        const fields = [\n            'line1',\n            'line2',\n            'city',\n            'state',\n            'zip'\n        ];\n        for (const field of fields){\n            const entry = toTrimmedString(record[field]);\n            if (entry) address[field] = entry;\n        }\n        if (!address.line1) {\n            const freeform = toTrimmedString(record.freeform);\n            if (freeform) address.line1 = freeform;\n        }\n    } else {\n        const line1 = toTrimmedString(value);\n        if (line1) address.line1 = line1;\n    }\n    if (extras) {\n        const city = toTrimmedString(extras.city);\n        const state = toTrimmedString(extras.state);\n        const zip = toTrimmedString(extras.zip);\n        if (city && !address.city) address.city = city;\n        if (state && !address.state) address.state = state;\n        if (zip && !address.zip) address.zip = zip;\n    }\n    return Object.keys(address).length > 0 ? address : null;\n}\nfunction normalizePayloadToDocxV1(input) {\n    if (!isPlainObject(input)) return {};\n    const payload = input;\n    const result = {};\n    const legacyNotes = {\n        ...isPlainObject(payload._legacy) ? payload._legacy : {},\n        ...isPlainObject(payload._legacy_notes) ? payload._legacy_notes : {}\n    };\n    const addLegacy = (key, value)=>{\n        if (value === undefined) return;\n        if (legacyNotes[key] === undefined) {\n            legacyNotes[key] = value;\n        }\n    };\n    for (const [key, value] of Object.entries(payload)){\n        if (canonicalKeys.has(key)) {\n            result[key] = value;\n        }\n    }\n    if (result.opposing_address_known === undefined && payload.opposing_known_address !== undefined) {\n        result.opposing_address_known = payload.opposing_known_address;\n    }\n    if (result.opposing_last_known_address === undefined) {\n        const address = buildAddressValue(payload.opposing_address);\n        if (address) result.opposing_last_known_address = address;\n    } else if (isPlainObject(result.opposing_last_known_address) && payload.opposing_address) {\n        const address = buildAddressValue(payload.opposing_address);\n        if (address) {\n            result.opposing_last_known_address = {\n                ...address,\n                ...result.opposing_last_known_address\n            };\n        }\n    }\n    if (result.client_address === undefined) {\n        const address = buildAddressValue(payload.client_address, {\n            city: payload.client_city,\n            state: payload.client_state,\n            zip: payload.client_zip\n        });\n        if (address) result.client_address = address;\n    } else if (isPlainObject(result.client_address)) {\n        const address = buildAddressValue(payload.client_address, {\n            city: payload.client_city,\n            state: payload.client_state,\n            zip: payload.client_zip\n        });\n        if (address) {\n            result.client_address = {\n                ...address,\n                ...result.client_address\n            };\n        }\n    }\n    if (result.special_needs === undefined && payload.child_special_needs !== undefined) {\n        result.special_needs = payload.child_special_needs;\n    }\n    if (result.prior_custody_orders === undefined && payload.prior_custody_cases !== undefined) {\n        result.prior_custody_orders = payload.prior_custody_cases;\n    }\n    if (result.amount === undefined && payload.estimated_balance !== undefined) {\n        result.amount = payload.estimated_balance;\n    }\n    if (result.opposing_income_known === undefined && payload.opposing_income_estimated !== undefined) {\n        const estimate = payload.opposing_income_estimated;\n        if (typeof estimate === 'number' && !Number.isNaN(estimate)) {\n            result.opposing_income_known = true;\n            addLegacy('opposing_income_estimated', estimate);\n        } else {\n            addLegacy('opposing_income_estimated', estimate);\n        }\n    }\n    if (result.support_requested === undefined && typeof payload.support_type === 'string') {\n        result.support_requested = payload.support_type;\n    }\n    if (typeof payload.support_requested === 'boolean') {\n        addLegacy('support_requested_boolean', payload.support_requested);\n        if (typeof result.support_requested !== 'string') {\n            result.support_requested = null;\n        }\n    }\n    if (payload.opposing_phone !== undefined) addLegacy('opposing_phone', payload.opposing_phone);\n    if (payload.opposing_email !== undefined) addLegacy('opposing_email', payload.opposing_email);\n    if (payload.marriage_notes !== undefined) addLegacy('marriage_notes', payload.marriage_notes);\n    if (payload.fault_ground_detail !== undefined) addLegacy('fault_ground_detail', payload.fault_ground_detail);\n    if (payload.separation_status !== undefined) addLegacy('separation_status', payload.separation_status);\n    if (payload.child_school_info !== undefined) addLegacy('child_school_info', payload.child_school_info);\n    if (payload.current_order_exists !== undefined) addLegacy('current_order_exists', payload.current_order_exists);\n    if (payload.other_parent_involvement !== undefined) {\n        addLegacy('other_parent_involvement', payload.other_parent_involvement);\n    }\n    if (payload.asset_description !== undefined) addLegacy('asset_description', payload.asset_description);\n    if (payload.documentation_provided !== undefined) {\n        addLegacy('documentation_provided', payload.documentation_provided);\n    }\n    if (payload.ownership_dispute !== undefined) addLegacy('ownership_dispute', payload.ownership_dispute);\n    if (payload.income_notes !== undefined) addLegacy('income_notes', payload.income_notes);\n    if (payload.debt_description !== undefined) addLegacy('debt_description', payload.debt_description);\n    if (payload.estimated_balance !== undefined) addLegacy('estimated_balance', payload.estimated_balance);\n    if (payload.joint_debt !== undefined) addLegacy('joint_debt', payload.joint_debt);\n    if (payload.dv_description !== undefined) addLegacy('dv_description', payload.dv_description);\n    if (payload.weapons_present !== undefined) addLegacy('weapons_present', payload.weapons_present);\n    if (payload.venue_notes !== undefined) addLegacy('venue_notes', payload.venue_notes);\n    if (payload.prior_protective_orders !== undefined) {\n        addLegacy('prior_protective_orders', payload.prior_protective_orders);\n    }\n    if (payload.prior_case_notes !== undefined) addLegacy('prior_case_notes', payload.prior_case_notes);\n    if (payload.desired_custody_outcome !== undefined) {\n        addLegacy('desired_custody_outcome', payload.desired_custody_outcome);\n    }\n    if (payload.desired_property_outcome !== undefined) {\n        addLegacy('desired_property_outcome', payload.desired_property_outcome);\n    }\n    if (payload.other_requests !== undefined) addLegacy('other_requests', payload.other_requests);\n    if (payload.uploaded_document_links !== undefined) {\n        addLegacy('uploaded_document_links', payload.uploaded_document_links);\n    }\n    if (payload.evidence_notes !== undefined) addLegacy('evidence_notes', payload.evidence_notes);\n    if (payload.client_city !== undefined) addLegacy('client_city', payload.client_city);\n    if (payload.client_state !== undefined) addLegacy('client_state', payload.client_state);\n    if (payload.client_zip !== undefined) addLegacy('client_zip', payload.client_zip);\n    if (payload.opposing_known_address !== undefined) {\n        addLegacy('opposing_known_address', payload.opposing_known_address);\n    }\n    if (payload.opposing_address !== undefined) addLegacy('opposing_address', payload.opposing_address);\n    for (const [key, value] of Object.entries(payload)){\n        if (!canonicalKeys.has(key) && key !== '_legacy_notes' && key !== '_legacy') {\n            addLegacy(key, value);\n        }\n    }\n    if (Object.keys(legacyNotes).length > 0) {\n        result._legacy = legacyNotes;\n    }\n    return result;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uLi8uLi9saWIvaW50YWtlL25vcm1hbGl6ZVBheWxvYWQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBb0U7QUFJcEUsTUFBTUMsZ0JBQWdCLElBQUlDLElBQ3hCRiw2RUFBcUJBLENBQUNHLFFBQVEsQ0FBQ0MsT0FBTyxDQUFDLENBQUNDLFVBQVlBLFFBQVFDLE1BQU0sQ0FBQ0MsR0FBRyxDQUFDLENBQUNDLFFBQVVBLE1BQU1DLEdBQUc7QUFHN0YsU0FBU0MsY0FBY0MsS0FBYztJQUNuQyxPQUFPQyxRQUFRRCxVQUFVLE9BQU9BLFVBQVUsWUFBWSxDQUFDRSxNQUFNQyxPQUFPLENBQUNIO0FBQ3ZFO0FBRUEsU0FBU0ksZ0JBQWdCSixLQUFjO0lBQ3JDLElBQUksT0FBT0EsVUFBVSxVQUFVLE9BQU9LO0lBQ3RDLE1BQU1DLFVBQVVOLE1BQU1PLElBQUk7SUFDMUIsT0FBT0QsUUFBUUUsTUFBTSxHQUFHLElBQUlGLFVBQVVEO0FBQ3hDO0FBRUEsU0FBU0ksa0JBQWtCVCxLQUFjLEVBQUVVLE1BQWdDO0lBQ3pFLE1BQU1DLFVBQWtDLENBQUM7SUFDekMsSUFBSVosY0FBY0MsUUFBUTtRQUN4QixNQUFNWSxTQUFTWjtRQUNmLE1BQU1MLFNBQVM7WUFBQztZQUFTO1lBQVM7WUFBUTtZQUFTO1NBQU07UUFDekQsS0FBSyxNQUFNRSxTQUFTRixPQUFRO1lBQzFCLE1BQU1rQixRQUFRVCxnQkFBZ0JRLE1BQU0sQ0FBQ2YsTUFBTTtZQUMzQyxJQUFJZ0IsT0FBT0YsT0FBTyxDQUFDZCxNQUFNLEdBQUdnQjtRQUM5QjtRQUNBLElBQUksQ0FBQ0YsUUFBUUcsS0FBSyxFQUFFO1lBQ2xCLE1BQU1DLFdBQVdYLGdCQUFnQlEsT0FBT0csUUFBUTtZQUNoRCxJQUFJQSxVQUFVSixRQUFRRyxLQUFLLEdBQUdDO1FBQ2hDO0lBQ0YsT0FBTztRQUNMLE1BQU1ELFFBQVFWLGdCQUFnQko7UUFDOUIsSUFBSWMsT0FBT0gsUUFBUUcsS0FBSyxHQUFHQTtJQUM3QjtJQUVB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QUFVLGNBQWNMLFFBQVFlLFVBQVU7SUFDaEYsSUFBSWYsUUFBUVMsc0JBQXNCLEtBQUszQixXQUFXO1FBQ2hEdUIsVUFBVSwwQkFBMEJMLFFBQVFTLHNCQUFzQjtJQUNwRTtJQUNBLElBQUlULFFBQVFXLGdCQUFnQixLQUFLN0IsV0FBV3VCLFVBQVUsb0JBQW9CTCxRQUFRVyxnQkFBZ0I7SUFFbEcsS0FBSyxNQUFNLENBQUNwQyxLQUFLRSxNQUFNLElBQUltQixPQUFPVSxPQUFPLENBQUNOLFNBQVU7UUFDbEQsSUFBSSxDQUFDakMsY0FBY3dDLEdBQUcsQ0FBQ2hDLFFBQVFBLFFBQVEsbUJBQW1CQSxRQUFRLFdBQVc7WUFDM0U4QixVQUFVOUIsS0FBS0U7UUFDakI7SUFDRjtJQUVBLElBQUltQixPQUFPQyxJQUFJLENBQUNLLGFBQWFqQixNQUFNLEdBQUcsR0FBRztRQUN2Q2dCLE9BQU9FLE9BQU8sR0FBR0Q7SUFDbkI7SUFFQSxPQUFPRDtBQUNUIiwic291cmNlcyI6WyIvVXNlcnMvZG9taW5pY3JhbmdoaWFzY2kvdmVyaWxleC1sYW5kaW5nL2xpYi9pbnRha2Uvbm9ybWFsaXplUGF5bG9hZC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHQV9ESVZPUkNFX0NVU1RPRFlfVjEgfSBmcm9tICcuL3NjaGVtYS9nYURpdm9yY2VDdXN0b2R5VjEnO1xuXG50eXBlIFBheWxvYWQgPSBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcblxuY29uc3QgY2Fub25pY2FsS2V5cyA9IG5ldyBTZXQoXG4gIEdBX0RJVk9SQ0VfQ1VTVE9EWV9WMS5zZWN0aW9ucy5mbGF0TWFwKChzZWN0aW9uKSA9PiBzZWN0aW9uLmZpZWxkcy5tYXAoKGZpZWxkKSA9PiBmaWVsZC5rZXkpKSxcbik7XG5cbmZ1bmN0aW9uIGlzUGxhaW5PYmplY3QodmFsdWU6IHVua25vd24pOiB2YWx1ZSBpcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB7XG4gIHJldHVybiBCb29sZWFuKHZhbHVlKSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmICFBcnJheS5pc0FycmF5KHZhbHVlKTtcbn1cblxuZnVuY3Rpb24gdG9UcmltbWVkU3RyaW5nKHZhbHVlOiB1bmtub3duKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHJldHVybiB1bmRlZmluZWQ7XG4gIGNvbnN0IHRyaW1tZWQgPSB2YWx1ZS50cmltKCk7XG4gIHJldHVybiB0cmltbWVkLmxlbmd0aCA+IDAgPyB0cmltbWVkIDogdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBidWlsZEFkZHJlc3NWYWx1ZSh2YWx1ZTogdW5rbm93biwgZXh0cmFzPzogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHwgbnVsbCB7XG4gIGNvbnN0IGFkZHJlc3M6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgaWYgKGlzUGxhaW5PYmplY3QodmFsdWUpKSB7XG4gICAgY29uc3QgcmVjb3JkID0gdmFsdWUgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG4gICAgY29uc3QgZmllbGRzID0gWydsaW5lMScsICdsaW5lMicsICdjaXR5JywgJ3N0YXRlJywgJ3ppcCddO1xuICAgIGZvciAoY29uc3QgZmllbGQgb2YgZmllbGRzKSB7XG4gICAgICBjb25zdCBlbnRyeSA9IHRvVHJpbW1lZFN0cmluZyhyZWNvcmRbZmllbGRdKTtcbiAgICAgIGlmIChlbnRyeSkgYWRkcmVzc1tmaWVsZF0gPSBlbnRyeTtcbiAgICB9XG4gICAgaWYgKCFhZGRyZXNzLmxpbmUxKSB7XG4gICAgICBjb25zdCBmcmVlZm9ybSA9IHRvVHJpbW1lZFN0cmluZyhyZWNvcmQuZnJlZWZvcm0pO1xuICAgICAgaWYgKGZyZWVmb3JtKSBhZGRyZXNzLmxpbmUxID0gZnJlZWZvcm07XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGNvbnN0IGxpbmUxID0gdG9UcmltbWVkU3RyaW5nKHZhbHVlKTtcbiAgICBpZiAobGluZTEpIGFkZHJlc3MubGluZTEgPSBsaW5lMTtcbiAgfVxuXG4gIGlmIChleHRyYXMpIHtcbiAgICBjb25zdCBjaXR5ID0gdG9UcmltbWVkU3RyaW5nKGV4dHJhcy5jaXR5KTtcbiAgICBjb25zdCBzdGF0ZSA9IHRvVHJpbW1lZFN0cmluZyhleHRyYXMuc3RhdGUpO1xuICAgIGNvbnN0IHppcCA9IHRvVHJpbW1lZFN0cmluZyhleHRyYXMuemlwKTtcbiAgICBpZiAoY2l0eSAmJiAhYWRkcmVzcy5jaXR5KSBhZGRyZXNzLmNpdHkgPSBjaXR5O1xuICAgIGlmIChzdGF0ZSAmJiAhYWRkcmVzcy5zdGF0ZSkgYWRkcmVzcy5zdGF0ZSA9IHN0YXRlO1xuICAgIGlmICh6aXAgJiYgIWFkZHJlc3MuemlwKSBhZGRyZXNzLnppcCA9IHppcDtcbiAgfVxuXG4gIHJldHVybiBPYmplY3Qua2V5cyhhZGRyZXNzKS5sZW5ndGggPiAwID8gYWRkcmVzcyA6IG51bGw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVQYXlsb2FkVG9Eb2N4VjEoaW5wdXQ6IHVua25vd24pOiBQYXlsb2FkIHtcbiAgaWYgKCFpc1BsYWluT2JqZWN0KGlucHV0KSkgcmV0dXJuIHt9O1xuICBjb25zdCBwYXlsb2FkID0gaW5wdXQgYXMgUGF5bG9hZDtcbiAgY29uc3QgcmVzdWx0OiBQYXlsb2FkID0ge307XG4gIGNvbnN0IGxlZ2FjeU5vdGVzOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9IHtcbiAgICAuLi4oaXNQbGFpbk9iamVjdChwYXlsb2FkLl9sZWdhY3kpID8gcGF5bG9hZC5fbGVnYWN5IDoge30pLFxuICAgIC4uLihpc1BsYWluT2JqZWN0KHBheWxvYWQuX2xlZ2FjeV9ub3RlcykgPyBwYXlsb2FkLl9sZWdhY3lfbm90ZXMgOiB7fSksXG4gIH07XG5cbiAgY29uc3QgYWRkTGVnYWN5ID0gKGtleTogc3RyaW5nLCB2YWx1ZTogdW5rbm93bikgPT4ge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgaWYgKGxlZ2FjeU5vdGVzW2tleV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgbGVnYWN5Tm90ZXNba2V5XSA9IHZhbHVlO1xuICAgIH1cbiAgfTtcblxuICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhwYXlsb2FkKSkge1xuICAgIGlmIChjYW5vbmljYWxLZXlzLmhhcyhrZXkpKSB7XG4gICAgICByZXN1bHRba2V5XSA9IHZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIGlmIChyZXN1bHQub3Bwb3NpbmdfYWRkcmVzc19rbm93biA9PT0gdW5kZWZpbmVkICYmIHBheWxvYWQub3Bwb3Npbmdfa25vd25fYWRkcmVzcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcmVzdWx0Lm9wcG9zaW5nX2FkZHJlc3Nfa25vd24gPSBwYXlsb2FkLm9wcG9zaW5nX2tub3duX2FkZHJlc3M7XG4gIH1cblxuICBpZiAocmVzdWx0Lm9wcG9zaW5nX2xhc3Rfa25vd25fYWRkcmVzcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgY29uc3QgYWRkcmVzcyA9IGJ1aWxkQWRkcmVzc1ZhbHVlKHBheWxvYWQub3Bwb3NpbmdfYWRkcmVzcyk7XG4gICAgaWYgKGFkZHJlc3MpIHJlc3VsdC5vcHBvc2luZ19sYXN0X2tub3duX2FkZHJlc3MgPSBhZGRyZXNzO1xuICB9IGVsc2UgaWYgKGlzUGxhaW5PYmplY3QocmVzdWx0Lm9wcG9zaW5nX2xhc3Rfa25vd25fYWRkcmVzcykgJiYgcGF5bG9hZC5vcHBvc2luZ19hZGRyZXNzKSB7XG4gICAgY29uc3QgYWRkcmVzcyA9IGJ1aWxkQWRkcmVzc1ZhbHVlKHBheWxvYWQub3Bwb3NpbmdfYWRkcmVzcyk7XG4gICAgaWYgKGFkZHJlc3MpIHtcbiAgICAgIHJlc3VsdC5vcHBvc2luZ19sYXN0X2tub3duX2FkZHJlc3MgPSB7IC4uLmFkZHJlc3MsIC4uLnJlc3VsdC5vcHBvc2luZ19sYXN0X2tub3duX2FkZHJlc3MgfTtcbiAgICB9XG4gIH1cblxuICBpZiAocmVzdWx0LmNsaWVudF9hZGRyZXNzID09PSB1bmRlZmluZWQpIHtcbiAgICBjb25zdCBhZGRyZXNzID0gYnVpbGRBZGRyZXNzVmFsdWUocGF5bG9hZC5jbGllbnRfYWRkcmVzcywge1xuICAgICAgY2l0eTogcGF5bG9hZC5jbGllbnRfY2l0eSxcbiAgICAgIHN0YXRlOiBwYXlsb2FkLmNsaWVudF9zdGF0ZSxcbiAgICAgIHppcDogcGF5bG9hZC5jbGllbnRfemlwLFxuICAgIH0pO1xuICAgIGlmIChhZGRyZXNzKSByZXN1bHQuY2xpZW50X2FkZHJlc3MgPSBhZGRyZXNzO1xuICB9IGVsc2UgaWYgKGlzUGxhaW5PYmplY3QocmVzdWx0LmNsaWVudF9hZGRyZXNzKSkge1xuICAgIGNvbnN0IGFkZHJlc3MgPSBidWlsZEFkZHJlc3NWYWx1ZShwYXlsb2FkLmNsaWVudF9hZGRyZXNzLCB7XG4gICAgICBjaXR5OiBwYXlsb2FkLmNsaWVudF9jaXR5LFxuICAgICAgc3RhdGU6IHBheWxvYWQuY2xpZW50X3N0YXRlLFxuICAgICAgemlwOiBwYXlsb2FkLmNsaWVudF96aXAsXG4gICAgfSk7XG4gICAgaWYgKGFkZHJlc3MpIHtcbiAgICAgIHJlc3VsdC5jbGllbnRfYWRkcmVzcyA9IHsgLi4uYWRkcmVzcywgLi4ucmVzdWx0LmNsaWVudF9hZGRyZXNzIH07XG4gICAgfVxuICB9XG5cbiAgaWYgKHJlc3VsdC5zcGVjaWFsX25lZWRzID09PSB1bmRlZmluZWQgJiYgcGF5bG9hZC5jaGlsZF9zcGVjaWFsX25lZWRzICE9PSB1bmRlZmluZWQpIHtcbiAgICByZXN1bHQuc3BlY2lhbF9uZWVkcyA9IHBheWxvYWQuY2hpbGRfc3BlY2lhbF9uZWVkcztcbiAgfVxuXG4gIGlmIChyZXN1bHQucHJpb3JfY3VzdG9keV9vcmRlcnMgPT09IHVuZGVmaW5lZCAmJiBwYXlsb2FkLnByaW9yX2N1c3RvZHlfY2FzZXMgIT09IHVuZGVmaW5lZCkge1xuICAgIHJlc3VsdC5wcmlvcl9jdXN0b2R5X29yZGVycyA9IHBheWxvYWQucHJpb3JfY3VzdG9keV9jYXNlcztcbiAgfVxuXG4gIGlmIChyZXN1bHQuYW1vdW50ID09PSB1bmRlZmluZWQgJiYgcGF5bG9hZC5lc3RpbWF0ZWRfYmFsYW5jZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcmVzdWx0LmFtb3VudCA9IHBheWxvYWQuZXN0aW1hdGVkX2JhbGFuY2U7XG4gIH1cblxuICBpZiAocmVzdWx0Lm9wcG9zaW5nX2luY29tZV9rbm93biA9PT0gdW5kZWZpbmVkICYmIHBheWxvYWQub3Bwb3NpbmdfaW5jb21lX2VzdGltYXRlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgY29uc3QgZXN0aW1hdGUgPSBwYXlsb2FkLm9wcG9zaW5nX2luY29tZV9lc3RpbWF0ZWQ7XG4gICAgaWYgKHR5cGVvZiBlc3RpbWF0ZSA9PT0gJ251bWJlcicgJiYgIU51bWJlci5pc05hTihlc3RpbWF0ZSkpIHtcbiAgICAgIHJlc3VsdC5vcHBvc2luZ19pbmNvbWVfa25vd24gPSB0cnVlO1xuICAgICAgYWRkTGVnYWN5KCdvcHBvc2luZ19pbmNvbWVfZXN0aW1hdGVkJywgZXN0aW1hdGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhZGRMZWdhY3koJ29wcG9zaW5nX2luY29tZV9lc3RpbWF0ZWQnLCBlc3RpbWF0ZSk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHJlc3VsdC5zdXBwb3J0X3JlcXVlc3RlZCA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiBwYXlsb2FkLnN1cHBvcnRfdHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICByZXN1bHQuc3VwcG9ydF9yZXF1ZXN0ZWQgPSBwYXlsb2FkLnN1cHBvcnRfdHlwZTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgcGF5bG9hZC5zdXBwb3J0X3JlcXVlc3RlZCA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgYWRkTGVnYWN5KCdzdXBwb3J0X3JlcXVlc3RlZF9ib29sZWFuJywgcGF5bG9hZC5zdXBwb3J0X3JlcXVlc3RlZCk7XG4gICAgaWYgKHR5cGVvZiByZXN1bHQuc3VwcG9ydF9yZXF1ZXN0ZWQgIT09ICdzdHJpbmcnKSB7XG4gICAgICByZXN1bHQuc3VwcG9ydF9yZXF1ZXN0ZWQgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGlmIChwYXlsb2FkLm9wcG9zaW5nX3Bob25lICE9PSB1bmRlZmluZWQpIGFkZExlZ2FjeSgnb3Bwb3NpbmdfcGhvbmUnLCBwYXlsb2FkLm9wcG9zaW5nX3Bob25lKTtcbiAgaWYgKHBheWxvYWQub3Bwb3NpbmdfZW1haWwgIT09IHVuZGVmaW5lZCkgYWRkTGVnYWN5KCdvcHBvc2luZ19lbWFpbCcsIHBheWxvYWQub3Bwb3NpbmdfZW1haWwpO1xuXG4gIGlmIChwYXlsb2FkLm1hcnJpYWdlX25vdGVzICE9PSB1bmRlZmluZWQpIGFkZExlZ2FjeSgnbWFycmlhZ2Vfbm90ZXMnLCBwYXlsb2FkLm1hcnJpYWdlX25vdGVzKTtcbiAgaWYgKHBheWxvYWQuZmF1bHRfZ3JvdW5kX2RldGFpbCAhPT0gdW5kZWZpbmVkKSBhZGRMZWdhY3koJ2ZhdWx0X2dyb3VuZF9kZXRhaWwnLCBwYXlsb2FkLmZhdWx0X2dyb3VuZF9kZXRhaWwpO1xuICBpZiAocGF5bG9hZC5zZXBhcmF0aW9uX3N0YXR1cyAhPT0gdW5kZWZpbmVkKSBhZGRMZWdhY3koJ3NlcGFyYXRpb25fc3RhdHVzJywgcGF5bG9hZC5zZXBhcmF0aW9uX3N0YXR1cyk7XG5cbiAgaWYgKHBheWxvYWQuY2hpbGRfc2Nob29sX2luZm8gIT09IHVuZGVmaW5lZCkgYWRkTGVnYWN5KCdjaGlsZF9zY2hvb2xfaW5mbycsIHBheWxvYWQuY2hpbGRfc2Nob29sX2luZm8pO1xuICBpZiAocGF5bG9hZC5jdXJyZW50X29yZGVyX2V4aXN0cyAhPT0gdW5kZWZpbmVkKSBhZGRMZWdhY3koJ2N1cnJlbnRfb3JkZXJfZXhpc3RzJywgcGF5bG9hZC5jdXJyZW50X29yZGVyX2V4aXN0cyk7XG4gIGlmIChwYXlsb2FkLm90aGVyX3BhcmVudF9pbnZvbHZlbWVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgYWRkTGVnYWN5KCdvdGhlcl9wYXJlbnRfaW52b2x2ZW1lbnQnLCBwYXlsb2FkLm90aGVyX3BhcmVudF9pbnZvbHZlbWVudCk7XG4gIH1cblxuICBpZiAocGF5bG9hZC5hc3NldF9kZXNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkKSBhZGRMZWdhY3koJ2Fzc2V0X2Rlc2NyaXB0aW9uJywgcGF5bG9hZC5hc3NldF9kZXNjcmlwdGlvbik7XG4gIGlmIChwYXlsb2FkLmRvY3VtZW50YXRpb25fcHJvdmlkZWQgIT09IHVuZGVmaW5lZCkge1xuICAgIGFkZExlZ2FjeSgnZG9jdW1lbnRhdGlvbl9wcm92aWRlZCcsIHBheWxvYWQuZG9jdW1lbnRhdGlvbl9wcm92aWRlZCk7XG4gIH1cbiAgaWYgKHBheWxvYWQub3duZXJzaGlwX2Rpc3B1dGUgIT09IHVuZGVmaW5lZCkgYWRkTGVnYWN5KCdvd25lcnNoaXBfZGlzcHV0ZScsIHBheWxvYWQub3duZXJzaGlwX2Rpc3B1dGUpO1xuXG4gIGlmIChwYXlsb2FkLmluY29tZV9ub3RlcyAhPT0gdW5kZWZpbmVkKSBhZGRMZWdhY3koJ2luY29tZV9ub3RlcycsIHBheWxvYWQuaW5jb21lX25vdGVzKTtcblxuICBpZiAocGF5bG9hZC5kZWJ0X2Rlc2NyaXB0aW9uICE9PSB1bmRlZmluZWQpIGFkZExlZ2FjeSgnZGVidF9kZXNjcmlwdGlvbicsIHBheWxvYWQuZGVidF9kZXNjcmlwdGlvbik7XG4gIGlmIChwYXlsb2FkLmVzdGltYXRlZF9iYWxhbmNlICE9PSB1bmRlZmluZWQpIGFkZExlZ2FjeSgnZXN0aW1hdGVkX2JhbGFuY2UnLCBwYXlsb2FkLmVzdGltYXRlZF9iYWxhbmNlKTtcbiAgaWYgKHBheWxvYWQuam9pbnRfZGVidCAhPT0gdW5kZWZpbmVkKSBhZGRMZWdhY3koJ2pvaW50X2RlYnQnLCBwYXlsb2FkLmpvaW50X2RlYnQpO1xuXG4gIGlmIChwYXlsb2FkLmR2X2Rlc2NyaXB0aW9uICE9PSB1bmRlZmluZWQpIGFkZExlZ2FjeSgnZHZfZGVzY3JpcHRpb24nLCBwYXlsb2FkLmR2X2Rlc2NyaXB0aW9uKTtcbiAgaWYgKHBheWxvYWQud2VhcG9uc19wcmVzZW50ICE9PSB1bmRlZmluZWQpIGFkZExlZ2FjeSgnd2VhcG9uc19wcmVzZW50JywgcGF5bG9hZC53ZWFwb25zX3ByZXNlbnQpO1xuXG4gIGlmIChwYXlsb2FkLnZlbnVlX25vdGVzICE9PSB1bmRlZmluZWQpIGFkZExlZ2FjeSgndmVudWVfbm90ZXMnLCBwYXlsb2FkLnZlbnVlX25vdGVzKTtcblxuICBpZiAocGF5bG9hZC5wcmlvcl9wcm90ZWN0aXZlX29yZGVycyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgYWRkTGVnYWN5KCdwcmlvcl9wcm90ZWN0aXZlX29yZGVycycsIHBheWxvYWQucHJpb3JfcHJvdGVjdGl2ZV9vcmRlcnMpO1xuICB9XG4gIGlmIChwYXlsb2FkLnByaW9yX2Nhc2Vfbm90ZXMgIT09IHVuZGVmaW5lZCkgYWRkTGVnYWN5KCdwcmlvcl9jYXNlX25vdGVzJywgcGF5bG9hZC5wcmlvcl9jYXNlX25vdGVzKTtcblxuICBpZiAocGF5bG9hZC5kZXNpcmVkX2N1c3RvZHlfb3V0Y29tZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgYWRkTGVnYWN5KCdkZXNpcmVkX2N1c3RvZHlfb3V0Y29tZScsIHBheWxvYWQuZGVzaXJlZF9jdXN0b2R5X291dGNvbWUpO1xuICB9XG4gIGlmIChwYXlsb2FkLmRlc2lyZWRfcHJvcGVydHlfb3V0Y29tZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgYWRkTGVnYWN5KCdkZXNpcmVkX3Byb3BlcnR5X291dGNvbWUnLCBwYXlsb2FkLmRlc2lyZWRfcHJvcGVydHlfb3V0Y29tZSk7XG4gIH1cbiAgaWYgKHBheWxvYWQub3RoZXJfcmVxdWVzdHMgIT09IHVuZGVmaW5lZCkgYWRkTGVnYWN5KCdvdGhlcl9yZXF1ZXN0cycsIHBheWxvYWQub3RoZXJfcmVxdWVzdHMpO1xuXG4gIGlmIChwYXlsb2FkLnVwbG9hZGVkX2RvY3VtZW50X2xpbmtzICE9PSB1bmRlZmluZWQpIHtcbiAgICBhZGRMZWdhY3koJ3VwbG9hZGVkX2RvY3VtZW50X2xpbmtzJywgcGF5bG9hZC51cGxvYWRlZF9kb2N1bWVudF9saW5rcyk7XG4gIH1cbiAgaWYgKHBheWxvYWQuZXZpZGVuY2Vfbm90ZXMgIT09IHVuZGVmaW5lZCkgYWRkTGVnYWN5KCdldmlkZW5jZV9ub3RlcycsIHBheWxvYWQuZXZpZGVuY2Vfbm90ZXMpO1xuXG4gIGlmIChwYXlsb2FkLmNsaWVudF9jaXR5ICE9PSB1bmRlZmluZWQpIGFkZExlZ2FjeSgnY2xpZW50X2NpdHknLCBwYXlsb2FkLmNsaWVudF9jaXR5KTtcbiAgaWYgKHBheWxvYWQuY2xpZW50X3N0YXRlICE9PSB1bmRlZmluZWQpIGFkZExlZ2FjeSgnY2xpZW50X3N0YXRlJywgcGF5bG9hZC5jbGllbnRfc3RhdGUpO1xuICBpZiAocGF5bG9hZC5jbGllbnRfemlwICE9PSB1bmRlZmluZWQpIGFkZExlZ2FjeSgnY2xpZW50X3ppcCcsIHBheWxvYWQuY2xpZW50X3ppcCk7XG4gIGlmIChwYXlsb2FkLm9wcG9zaW5nX2tub3duX2FkZHJlc3MgIT09IHVuZGVmaW5lZCkge1xuICAgIGFkZExlZ2FjeSgnb3Bwb3Npbmdfa25vd25fYWRkcmVzcycsIHBheWxvYWQub3Bwb3Npbmdfa25vd25fYWRkcmVzcyk7XG4gIH1cbiAgaWYgKHBheWxvYWQub3Bwb3NpbmdfYWRkcmVzcyAhPT0gdW5kZWZpbmVkKSBhZGRMZWdhY3koJ29wcG9zaW5nX2FkZHJlc3MnLCBwYXlsb2FkLm9wcG9zaW5nX2FkZHJlc3MpO1xuXG4gIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHBheWxvYWQpKSB7XG4gICAgaWYgKCFjYW5vbmljYWxLZXlzLmhhcyhrZXkpICYmIGtleSAhPT0gJ19sZWdhY3lfbm90ZXMnICYmIGtleSAhPT0gJ19sZWdhY3knKSB7XG4gICAgICBhZGRMZWdhY3koa2V5LCB2YWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgaWYgKE9iamVjdC5rZXlzKGxlZ2FjeU5vdGVzKS5sZW5ndGggPiAwKSB7XG4gICAgcmVzdWx0Ll9sZWdhY3kgPSBsZWdhY3lOb3RlcztcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG4iXSwibmFtZXMiOlsiR0FfRElWT1JDRV9DVVNUT0RZX1YxIiwiY2Fub25pY2FsS2V5cyIsIlNldCIsInNlY3Rpb25zIiwiZmxhdE1hcCIsInNlY3Rpb24iLCJmaWVsZHMiLCJtYXAiLCJmaWVsZCIsImtleSIsImlzUGxhaW5PYmplY3QiLCJ2YWx1ZSIsIkJvb2xlYW4iLCJBcnJheSIsImlzQXJyYXkiLCJ0b1RyaW1tZWRTdHJpbmciLCJ1bmRlZmluZWQiLCJ0cmltbWVkIiwidHJpbSIsImxlbmd0aCIsImJ1aWxkQWRkcmVzc1ZhbHVlIiwiZXh0cmFzIiwiYWRkcmVzcyIsInJlY29yZCIsImVudHJ5IiwibGluZTEiLCJmcmVlZm9ybSIsImNpdHkiLCJzdGF0ZSIsInppcCIsIk9iamVjdCIsImtleXMiLCJub3JtYWxpemVQYXlsb2FkVG9Eb2N4VjEiLCJpbnB1dCIsInBheWxvYWQiLCJyZXN1bHQiLCJsZWdhY3lOb3RlcyIsIl9sZWdhY3kiLCJfbGVnYWN5X25vdGVzIiwiYWRkTGVnYWN5IiwiZW50cmllcyIsImhhcyIsIm9wcG9zaW5nX2FkZHJlc3Nfa25vd24iLCJvcHBvc2luZ19rbm93bl9hZGRyZXNzIiwib3Bwb3NpbmdfbGFzdF9rbm93bl9hZGRyZXNzIiwib3Bwb3NpbmdfYWRkcmVzcyIsImNsaWVudF9hZGRyZXNzIiwiY2xpZW50X2NpdHkiLCJjbGllbnRfc3RhdGUiLCJjbGllbnRfemlwIiwic3BlY2lhbF9uZWVkcyIsImNoaWxkX3NwZWNpYWxfbmVlZHMiLCJwcmlvcl9jdXN0b2R5X29yZGVycyIsInByaW9yX2N1c3RvZHlfY2FzZXMiLCJhbW91bnQiLCJlc3RpbWF0ZWRfYmFsYW5jZSIsIm9wcG9zaW5nX2luY29tZV9rbm93biIsIm9wcG9zaW5nX2luY29tZV9lc3RpbWF0ZWQiLCJlc3RpbWF0ZSIsIk51bWJlciIsImlzTmFOIiwic3VwcG9ydF9yZXF1ZXN0ZWQiLCJzdXBwb3J0X3R5cGUiLCJvcHBvc2luZ19waG9uZSIsIm9wcG9zaW5nX2VtYWlsIiwibWFycmlhZ2Vfbm90ZXMiLCJmYXVsdF9ncm91bmRfZGV0YWlsIiwic2VwYXJhdGlvbl9zdGF0dXMiLCJjaGlsZF9zY2hvb2xfaW5mbyIsImN1cnJlbnRfb3JkZXJfZXhpc3RzIiwib3RoZXJfcGFyZW50X2ludm9sdmVtZW50IiwiYXNzZXRfZGVzY3JpcHRpb24iLCJkb2N1bWVudGF0aW9uX3Byb3ZpZGVkIiwib3duZXJzaGlwX2Rpc3B1dGUiLCJpbmNvbWVfbm90ZXMiLCJkZWJ0X2Rlc2NyaXB0aW9uIiwiam9pbnRfZGVidCIsImR2X2Rlc2NyaXB0aW9uIiwid2VhcG9uc19wcmVzZW50IiwidmVudWVfbm90ZXMiLCJwcmlvcl9wcm90ZWN0aXZlX29yZGVycyIsInByaW9yX2Nhc2Vfbm90ZXMiLCJkZXNpcmVkX2N1c3RvZHlfb3V0Y29tZSIsImRlc2lyZWRfcHJvcGVydHlfb3V0Y29tZSIsIm90aGVyX3JlcXVlc3RzIiwidXBsb2FkZWRfZG9jdW1lbnRfbGlua3MiLCJldmlkZW5jZV9ub3RlcyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/../../lib/intake/normalizePayload.ts\n");

/***/ }),

/***/ "(api-node)/../../lib/intake/schema/gaDivorceCustodyV1.ts":
/*!*****************************************************!*\
  !*** ../../lib/intake/schema/gaDivorceCustodyV1.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GA_DIVORCE_CUSTODY_V1: () => (/* binding */ GA_DIVORCE_CUSTODY_V1),\n/* harmony export */   GA_DIVORCE_CUSTODY_V1_AI_FLAGS: () => (/* binding */ GA_DIVORCE_CUSTODY_V1_AI_FLAGS)\n/* harmony export */ });\nconst GA_DIVORCE_CUSTODY_V1 = {\n    version: 'v1.0',\n    sections: [\n        {\n            id: 'matter_metadata',\n            title: 'MATTER METADATA (SYSTEM + CLIENT)',\n            fields: [\n                {\n                    key: 'matter_type',\n                    type: 'enum',\n                    required: true,\n                    notes: 'divorce, custody, legitimation, modification',\n                    enumValues: [\n                        'divorce',\n                        'custody',\n                        'legitimation',\n                        'modification'\n                    ]\n                },\n                {\n                    key: 'urgency_level',\n                    type: 'enum',\n                    required: true,\n                    notes: 'routine, urgent, emergency',\n                    enumValues: [\n                        'routine',\n                        'urgent',\n                        'emergency'\n                    ]\n                },\n                {\n                    key: 'intake_channel',\n                    type: 'enum',\n                    required: true,\n                    notes: 'web, referral, phone',\n                    enumValues: [\n                        'web',\n                        'referral',\n                        'phone'\n                    ]\n                },\n                {\n                    key: 'language_preference',\n                    type: 'enum',\n                    required: false,\n                    notes: 'future multilingual support',\n                    enumValues: [\n                        'english',\n                        'spanish',\n                        'other',\n                        'unknown',\n                        'prefer_not_to_say'\n                    ]\n                },\n                {\n                    key: 'date_of_intake',\n                    type: 'date',\n                    required: true,\n                    notes: 'system generated'\n                }\n            ]\n        },\n        {\n            id: 'client_identity',\n            title: 'CLIENT IDENTITY',\n            fields: [\n                {\n                    key: 'client_first_name',\n                    type: 'text',\n                    required: true\n                },\n                {\n                    key: 'client_last_name',\n                    type: 'text',\n                    required: true\n                },\n                {\n                    key: 'client_dob',\n                    type: 'date',\n                    required: true\n                },\n                {\n                    key: 'client_phone',\n                    type: 'text',\n                    required: true\n                },\n                {\n                    key: 'client_email',\n                    type: 'text',\n                    required: true\n                },\n                {\n                    key: 'client_address',\n                    type: 'structured',\n                    required: true,\n                    notes: 'structured address'\n                },\n                {\n                    key: 'client_county',\n                    type: 'enum',\n                    required: true,\n                    notes: 'CSV-derived (docs/ga_counties.csv)'\n                },\n                {\n                    key: 'citizenship_status',\n                    type: 'enum',\n                    required: false,\n                    enumValues: [\n                        'us_citizen',\n                        'lawful_permanent_resident',\n                        'nonimmigrant_visa_holder',\n                        'undocumented',\n                        'dual_citizen',\n                        'unknown',\n                        'prefer_not_to_say'\n                    ]\n                },\n                {\n                    key: 'military_status',\n                    type: 'boolean',\n                    required: false\n                }\n            ]\n        },\n        {\n            id: 'opposing_party',\n            title: 'OPPOSING PARTY (SPOUSE / OTHER PARENT)',\n            fields: [\n                {\n                    key: 'opposing_name',\n                    type: 'text',\n                    required: true\n                },\n                {\n                    key: 'opposing_address_known',\n                    type: 'boolean',\n                    required: true\n                },\n                {\n                    key: 'opposing_last_known_address',\n                    type: 'structured',\n                    required: true,\n                    notes: 'structured address; required if opposing_address_known'\n                },\n                {\n                    key: 'service_concerns',\n                    type: 'boolean',\n                    required: false\n                },\n                {\n                    key: 'opposing_employment_status',\n                    type: 'enum',\n                    required: false,\n                    enumValues: [\n                        'employed_full_time',\n                        'employed_part_time',\n                        'self_employed',\n                        'unemployed',\n                        'student',\n                        'retired',\n                        'disabled',\n                        'unknown'\n                    ]\n                }\n            ]\n        },\n        {\n            id: 'marriage_details',\n            title: 'MARRIAGE DETAILS',\n            fields: [\n                {\n                    key: 'date_of_marriage',\n                    type: 'date',\n                    required: true\n                },\n                {\n                    key: 'place_of_marriage',\n                    type: 'text',\n                    required: true\n                },\n                {\n                    key: 'date_of_separation',\n                    type: 'date',\n                    required: true,\n                    notes: 'required if separated'\n                },\n                {\n                    key: 'currently_cohabitating',\n                    type: 'boolean',\n                    required: true\n                },\n                {\n                    key: 'marriage_certificate_available',\n                    type: 'boolean',\n                    required: false\n                }\n            ]\n        },\n        {\n            id: 'separation_grounds',\n            title: 'SEPARATION & GROUNDS (GEORGIA)',\n            fields: [\n                {\n                    key: 'grounds_for_divorce',\n                    type: 'enum',\n                    required: true,\n                    enumValues: [\n                        'no_fault',\n                        'adultery',\n                        'desertion',\n                        'cruel_treatment',\n                        'habitual_drug_use',\n                        'mental_incapacity',\n                        'impotence',\n                        'pregnancy_by_another',\n                        'incest',\n                        'conviction_of_felony'\n                    ]\n                },\n                {\n                    key: 'fault_allegations',\n                    type: 'multiselect',\n                    required: false,\n                    enumValues: [\n                        'adultery',\n                        'desertion',\n                        'cruel_treatment',\n                        'habitual_drug_use',\n                        'mental_incapacity',\n                        'impotence',\n                        'pregnancy_by_another',\n                        'incest',\n                        'conviction_of_felony'\n                    ]\n                },\n                {\n                    key: 'reconciliation_attempted',\n                    type: 'boolean',\n                    required: false\n                }\n            ]\n        },\n        {\n            id: 'child_object',\n            title: 'CHILD OBJECT (REPEATABLE)',\n            fields: [\n                {\n                    key: 'child_full_name',\n                    type: 'text',\n                    required: true\n                },\n                {\n                    key: 'child_dob',\n                    type: 'date',\n                    required: true\n                },\n                {\n                    key: 'child_current_residence',\n                    type: 'enum',\n                    required: true,\n                    enumValues: [\n                        'with_client',\n                        'with_opposing',\n                        'shared',\n                        'third_party',\n                        'other',\n                        'unknown'\n                    ]\n                },\n                {\n                    key: 'biological_relation',\n                    type: 'enum',\n                    required: true,\n                    enumValues: [\n                        'client',\n                        'opposing',\n                        'both',\n                        'neither',\n                        'unknown'\n                    ]\n                },\n                {\n                    key: 'special_needs',\n                    type: 'boolean',\n                    required: false\n                }\n            ]\n        },\n        {\n            id: 'children_custody',\n            title: 'CHILDREN & CUSTODY (CUSTODY SETTINGS)',\n            fields: [\n                {\n                    key: 'custody_type_requested',\n                    type: 'enum',\n                    required: true,\n                    enumValues: [\n                        'legal_custody',\n                        'physical_custody',\n                        'joint_custody',\n                        'sole_custody'\n                    ]\n                },\n                {\n                    key: 'parenting_plan_exists',\n                    type: 'boolean',\n                    required: true\n                },\n                {\n                    key: 'current_parenting_schedule',\n                    type: 'text',\n                    required: false\n                },\n                {\n                    key: 'school_district',\n                    type: 'text',\n                    required: false\n                }\n            ]\n        },\n        {\n            id: 'asset_object',\n            title: 'ASSET OBJECT (REPEATABLE)',\n            fields: [\n                {\n                    key: 'asset_type',\n                    type: 'enum',\n                    required: true,\n                    enumValues: [\n                        'real_estate',\n                        'vehicle',\n                        'bank_account',\n                        'retirement_account',\n                        'investment_account',\n                        'business_interest',\n                        'personal_property',\n                        'other'\n                    ]\n                },\n                {\n                    key: 'ownership',\n                    type: 'enum',\n                    required: true,\n                    enumValues: [\n                        'sole_client',\n                        'sole_opposing',\n                        'joint',\n                        'third_party',\n                        'unknown'\n                    ]\n                },\n                {\n                    key: 'estimated_value',\n                    type: 'number',\n                    required: true\n                },\n                {\n                    key: 'title_holder',\n                    type: 'enum',\n                    required: true,\n                    enumValues: [\n                        'client',\n                        'opposing',\n                        'both',\n                        'third_party',\n                        'unknown'\n                    ]\n                },\n                {\n                    key: 'acquired_pre_marriage',\n                    type: 'boolean',\n                    required: true\n                }\n            ]\n        },\n        {\n            id: 'income_support',\n            title: 'INCOME & SUPPORT',\n            fields: [\n                {\n                    key: 'client_income_monthly',\n                    type: 'number',\n                    required: true\n                },\n                {\n                    key: 'opposing_income_known',\n                    type: 'boolean',\n                    required: true\n                },\n                {\n                    key: 'support_requested',\n                    type: 'enum',\n                    required: true,\n                    enumValues: [\n                        'child_support',\n                        'spousal_support',\n                        'both'\n                    ]\n                },\n                {\n                    key: 'child_support_estimate',\n                    type: 'number',\n                    required: false,\n                    isSystem: true,\n                    notes: 'system-only'\n                },\n                {\n                    key: 'alimony_requested',\n                    type: 'boolean',\n                    required: false\n                }\n            ]\n        },\n        {\n            id: 'debt_object',\n            title: 'DEBT OBJECT (REPEATABLE)',\n            fields: [\n                {\n                    key: 'debt_type',\n                    type: 'enum',\n                    required: true,\n                    enumValues: [\n                        'credit_card',\n                        'student_loan',\n                        'auto_loan',\n                        'mortgage',\n                        'medical_debt',\n                        'tax_debt',\n                        'personal_loan',\n                        'other'\n                    ]\n                },\n                {\n                    key: 'amount',\n                    type: 'number',\n                    required: true\n                },\n                {\n                    key: 'responsible_party',\n                    type: 'enum',\n                    required: true,\n                    enumValues: [\n                        'client',\n                        'opposing',\n                        'both',\n                        'third_party',\n                        'unknown'\n                    ]\n                },\n                {\n                    key: 'incurred_during_marriage',\n                    type: 'boolean',\n                    required: true\n                }\n            ]\n        },\n        {\n            id: 'domestic_violence_risk',\n            title: 'DOMESTIC VIOLENCE / RISK',\n            fields: [\n                {\n                    key: 'dv_present',\n                    type: 'boolean',\n                    required: true\n                },\n                {\n                    key: 'protective_order_exists',\n                    type: 'boolean',\n                    required: true,\n                    notes: 'required if dv_present'\n                },\n                {\n                    key: 'immediate_safety_concerns',\n                    type: 'boolean',\n                    required: true\n                },\n                {\n                    key: 'children_exposed',\n                    type: 'boolean',\n                    required: false\n                }\n            ]\n        },\n        {\n            id: 'jurisdiction_venue',\n            title: 'JURISDICTION & VENUE',\n            fields: [\n                {\n                    key: 'county_of_filing',\n                    type: 'enum',\n                    required: true,\n                    notes: 'CSV-derived (docs/ga_counties.csv)'\n                },\n                {\n                    key: 'residency_duration_months',\n                    type: 'number',\n                    required: true\n                },\n                {\n                    key: 'venue_confirmed',\n                    type: 'boolean',\n                    required: false,\n                    isSystem: true\n                }\n            ]\n        },\n        {\n            id: 'prior_legal_actions',\n            title: 'PRIOR LEGAL ACTIONS',\n            fields: [\n                {\n                    key: 'prior_divorce_filings',\n                    type: 'boolean',\n                    required: true\n                },\n                {\n                    key: 'prior_custody_orders',\n                    type: 'boolean',\n                    required: true\n                },\n                {\n                    key: 'case_numbers',\n                    type: 'text',\n                    required: false\n                },\n                {\n                    key: 'existing_attorney',\n                    type: 'boolean',\n                    required: true\n                }\n            ]\n        },\n        {\n            id: 'desired_outcomes',\n            title: 'DESIRED OUTCOMES',\n            fields: [\n                {\n                    key: 'primary_goal',\n                    type: 'enum',\n                    required: true,\n                    enumValues: [\n                        'divorce_finalization',\n                        'custody_determination',\n                        'custody_modification',\n                        'support_establishment',\n                        'support_modification',\n                        'property_division',\n                        'protective_relief',\n                        'legal_guidance',\n                        'other'\n                    ]\n                },\n                {\n                    key: 'settlement_preference',\n                    type: 'enum',\n                    required: true,\n                    enumValues: [\n                        'strongly_prefer_settlement',\n                        'prefer_settlement',\n                        'open_to_either',\n                        'prefer_litigation',\n                        'strongly_prefer_litigation',\n                        'unsure'\n                    ]\n                },\n                {\n                    key: 'litigation_tolerance',\n                    type: 'enum',\n                    required: true,\n                    enumValues: [\n                        'low',\n                        'moderate',\n                        'high',\n                        'unknown'\n                    ]\n                },\n                {\n                    key: 'non_negotiables',\n                    type: 'text',\n                    required: false\n                }\n            ]\n        },\n        {\n            id: 'evidence_documents',\n            title: 'EVIDENCE & DOCUMENTS',\n            fields: [\n                {\n                    key: 'document_type',\n                    type: 'enum',\n                    required: false,\n                    enumValues: [\n                        'pay_stub',\n                        'tax_return',\n                        'bank_statement',\n                        'financial_statement',\n                        'real_estate_document',\n                        'vehicle_title',\n                        'retirement_statement',\n                        'business_record',\n                        'text_message',\n                        'email',\n                        'photo',\n                        'video',\n                        'police_report',\n                        'court_order',\n                        'protective_order',\n                        'medical_record',\n                        'school_record',\n                        'other'\n                    ]\n                },\n                {\n                    key: 'uploaded',\n                    type: 'boolean',\n                    required: false\n                },\n                {\n                    key: 'missing_required_docs',\n                    type: 'list',\n                    required: false,\n                    isSystem: true,\n                    notes: 'system-only'\n                }\n            ]\n        }\n    ]\n};\nconst GA_DIVORCE_CUSTODY_V1_AI_FLAGS = [\n    {\n        key: 'jurisdiction_risk',\n        trigger: 'Residency / venue mismatch'\n    },\n    {\n        key: 'dv_risk',\n        trigger: 'DV indicated + weapons present'\n    },\n    {\n        key: 'custody_complexity',\n        trigger: 'Multiple children + special needs'\n    },\n    {\n        key: 'asset_complexity',\n        trigger: 'Business / high-value assets detected'\n    },\n    {\n        key: 'support_complexity',\n        trigger: 'Support requested + income disparity'\n    },\n    {\n        key: 'missing_required',\n        trigger: 'Required fields missing at submission'\n    }\n];\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uLi8uLi9saWIvaW50YWtlL3NjaGVtYS9nYURpdm9yY2VDdXN0b2R5VjEudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFFTyxNQUFNQSx3QkFBbUM7SUFDOUNDLFNBQVM7SUFDVEMsVUFBVTtRQUNSO1lBQ0VDLElBQUk7WUFDSkMsT0FBTztZQUNQQyxRQUFRO2dCQUNOO29CQUNFQyxLQUFLO29CQUNMQyxNQUFNO29CQUNOQyxVQUFVO29CQUNWQyxPQUFPO29CQUNQQyxZQUFZO3dCQUFDO3dCQUFXO3dCQUFXO3dCQUFnQjtxQkFBZTtnQkFDcEU7Z0JBQ0E7b0JBQ0VKLEtBQUs7b0JBQ0xDLE1BQU07b0JBQ05DLFVBQVU7b0JBQ1ZDLE9BQU87b0JBQ1BDLFlBQVk7d0JBQUM7d0JBQVc7d0JBQVU7cUJBQVk7Z0JBQ2hEO2dCQUNBO29CQUNFSixLQUFLO29CQUNMQyxNQUFNO29CQUNOQyxVQUFVO29CQUNWQyxPQUFPO29CQUNQQyxZQUFZO3dCQUFDO3dCQUFPO3dCQUFZO3FCQUFRO2dCQUMxQztnQkFDQTtvQkFDRUosS0FBSztvQkFDTEMsTUFBTTtvQkFDTkMsVUFBVTtvQkFDVkMsT0FBTztvQkFDUEMsWUFBWTt3QkFBQzt3QkFBVzt3QkFBVzt3QkFBUzt3QkFBVztxQkFBb0I7Z0JBQzdFO2dCQUNBO29CQUNFSixLQUFLO29CQUNMQyxNQUFNO29CQUNOQyxVQUFVO29CQUNWQyxPQUFPO2dCQUNUO2FBQ0Q7UUFDSDtRQUNBO1lBQ0VOLElBQUk7WUFDSkMsT0FBTztZQUNQQyxRQUFRO2dCQUNOO29CQUFFQyxLQUFLO29CQUFxQkMsTUFBTTtvQkFBUUMsVUFBVTtnQkFBSztnQkFDekQ7b0JBQUVGLEtBQUs7b0JBQW9CQyxNQUFNO29CQUFRQyxVQUFVO2dCQUFLO2dCQUN4RDtvQkFBRUYsS0FBSztvQkFBY0MsTUFBTTtvQkFBUUMsVUFBVTtnQkFBSztnQkFDbEQ7b0JBQUVGLEtBQUs7b0JBQWdCQyxNQUFNO29CQUFRQyxVQUFVO2dCQUFLO2dCQUNwRDtvQkFB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QkFDQTt3QkFDQTt3QkFDQTt3QkFDQTt3QkFDQTt3QkFDQTt3QkFDQTt3QkFDQTt3QkFDQTt3QkFDQTtxQkFDRDtnQkFDSDtnQkFDQTtvQkFBRUosS0FBSztvQkFBWUMsTUFBTTtvQkFBV0MsVUFBVTtnQkFBTTtnQkFDcEQ7b0JBQ0VGLEtBQUs7b0JBQ0xDLE1BQU07b0JBQ05DLFVBQVU7b0JBQ1ZHLFVBQVU7b0JBQ1ZGLE9BQU87Z0JBQ1Q7YUFDRDtRQUNIO0tBQ0Q7QUFDSCxFQUFFO0FBRUssTUFBTUcsaUNBQThDO0lBQ3pEO1FBQUVOLEtBQUs7UUFBcUJPLFNBQVM7SUFBNkI7SUFDbEU7UUFBRVAsS0FBSztRQUFXTyxTQUFTO0lBQWlDO0lBQzVEO1FBQUVQLEtBQUs7UUFBc0JPLFNBQVM7SUFBb0M7SUFDMUU7UUFBRVAsS0FBSztRQUFvQk8sU0FBUztJQUF3QztJQUM1RTtRQUFFUCxLQUFLO1FBQXNCTyxTQUFTO0lBQXVDO0lBQzdFO1FBQUVQLEtBQUs7UUFBb0JPLFNBQVM7SUFBd0M7Q0FDN0UsQ0FBQyIsInNvdXJjZXMiOlsiL1VzZXJzL2RvbWluaWNyYW5naGlhc2NpL3ZlcmlsZXgtbGFuZGluZy9saWIvaW50YWtlL3NjaGVtYS9nYURpdm9yY2VDdXN0b2R5VjEudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBBaUZsYWdEZWYsIFNjaGVtYURlZiB9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgY29uc3QgR0FfRElWT1JDRV9DVVNUT0RZX1YxOiBTY2hlbWFEZWYgPSB7XG4gIHZlcnNpb246ICd2MS4wJyxcbiAgc2VjdGlvbnM6IFtcbiAgICB7XG4gICAgICBpZDogJ21hdHRlcl9tZXRhZGF0YScsXG4gICAgICB0aXRsZTogJ01BVFRFUiBNRVRBREFUQSAoU1lTVEVNICsgQ0xJRU5UKScsXG4gICAgICBmaWVsZHM6IFtcbiAgICAgICAge1xuICAgICAgICAgIGtleTogJ21hdHRlcl90eXBlJyxcbiAgICAgICAgICB0eXBlOiAnZW51bScsXG4gICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgbm90ZXM6ICdkaXZvcmNlLCBjdXN0b2R5LCBsZWdpdGltYXRpb24sIG1vZGlmaWNhdGlvbicsXG4gICAgICAgICAgZW51bVZhbHVlczogWydkaXZvcmNlJywgJ2N1c3RvZHknLCAnbGVnaXRpbWF0aW9uJywgJ21vZGlmaWNhdGlvbiddLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAga2V5OiAndXJnZW5jeV9sZXZlbCcsXG4gICAgICAgICAgdHlwZTogJ2VudW0nLFxuICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgIG5vdGVzOiAncm91dGluZSwgdXJnZW50LCBlbWVyZ2VuY3knLFxuICAgICAgICAgIGVudW1WYWx1ZXM6IFsncm91dGluZScsICd1cmdlbnQnLCAnZW1lcmdlbmN5J10sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBrZXk6ICdpbnRha2VfY2hhbm5lbCcsXG4gICAgICAgICAgdHlwZTogJ2VudW0nLFxuICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgIG5vdGVzOiAnd2ViLCByZWZlcnJhbCwgcGhvbmUnLFxuICAgICAgICAgIGVudW1WYWx1ZXM6IFsnd2ViJywgJ3JlZmVycmFsJywgJ3Bob25lJ10sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBrZXk6ICdsYW5ndWFnZV9wcmVmZXJlbmNlJyxcbiAgICAgICAgICB0eXBlOiAnZW51bScsXG4gICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICAgIG5vdGVzOiAnZnV0dXJlIG11bHRpbGluZ3VhbCBzdXBwb3J0JyxcbiAgICAgICAgICBlbnVtVmFsdWVzOiBbJ2VuZ2xpc2gnLCAnc3BhbmlzaCcsICdvdGhlcicsICd1bmtub3duJywgJ3ByZWZlcl9ub3RfdG9fc2F5J10sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBrZXk6ICdkYXRlX29mX2ludGFrZScsXG4gICAgICAgICAgdHlwZTogJ2RhdGUnLFxuICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgIG5vdGVzOiAnc3lzdGVtIGdlbmVyYXRlZCcsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICdjbGllbnRfaWRlbnRpdHknLFxuICAgICAgdGl0bGU6ICdDTElFTlQgSURFTlRJVFknLFxuICAgICAgZmllbGRzOiBbXG4gICAgICAgIHsga2V5OiAnY2xpZW50X2ZpcnN0X25hbWUnLCB0eXBlOiAndGV4dCcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gICAgICAgIHsga2V5OiAnY2xpZW50X2xhc3RfbmFtZScsIHR5cGU6ICd0ZXh0JywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICAgICAgeyBrZXk6ICdjbGllbnRfZG9iJywgdHlwZTogJ2RhdGUnLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgICAgICB7IGtleTogJ2NsaWVudF9waG9uZScsIHR5cGU6ICd0ZXh0JywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICAgICAgeyBrZXk6ICdjbGllbnRfZW1haWwnLCB0eXBlOiAndGV4dCcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gICAgICAgIHsga2V5OiAnY2xpZW50X2FkZHJlc3MnLCB0eXBlOiAnc3RydWN0dXJlZCcsIHJlcXVpcmVkOiB0cnVlLCBub3RlczogJ3N0cnVjdHVyZWQgYWRkcmVzcycgfSxcbiAgICAgICAge1xuICAgICAgICAgIGtleTogJ2NsaWVudF9jb3VudHknLFxuICAgICAgICAgIHR5cGU6ICdlbnVtJyxcbiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICBub3RlczogJ0NTVi1kZXJpdmVkIChkb2NzL2dhX2NvdW50aWVzLmNzdiknLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAga2V5OiAnY2l0aXplbnNoaXBfc3RhdHVzJyxcbiAgICAgICAgICB0eXBlOiAnZW51bScsXG4gICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICAgIGVudW1WYWx1ZXM6IFtcbiAgICAgICAgICAgICd1c19jaXRpemVuJyxcbiAgICAgICAgICAgICdsYXdmdWxfcGVybWFuZW50X3Jlc2lkZW50JyxcbiAgICAgICAgICAgICdub25pbW1pZ3JhbnRfdmlzYV9ob2xkZXInLFxuICAgICAgICAgICAgJ3VuZG9jdW1lbnRlZCcsXG4gICAgICAgICAgICAnZHVhbF9jaXRpemVuJyxcbiAgICAgICAgICAgICd1bmtub3duJyxcbiAgICAgICAgICAgICdwcmVmZXJfbm90X3RvX3NheScsXG4gICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgICAgeyBrZXk6ICdtaWxpdGFyeV9zdGF0dXMnLCB0eXBlOiAnYm9vbGVhbicsIHJlcXVpcmVkOiBmYWxzZSB9LFxuICAgICAgXSxcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAnb3Bwb3NpbmdfcGFydHknLFxuICAgICAgdGl0bGU6ICdPUFBPU0lORyBQQVJUWSAoU1BPVVNFIC8gT1RIRVIgUEFSRU5UKScsXG4gICAgICBmaWVsZHM6IFtcbiAgICAgICAgeyBrZXk6ICdvcHBvc2luZ19uYW1lJywgdHlwZTogJ3RleHQnLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgICAgICB7IGtleTogJ29wcG9zaW5nX2FkZHJlc3Nfa25vd24nLCB0eXBlOiAnYm9vbGVhbicsIHJlcXVpcmVkOiB0cnVlIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBrZXk6ICdvcHBvc2luZ19sYXN0X2tub3duX2FkZHJlc3MnLFxuICAgICAgICAgIHR5cGU6ICdzdHJ1Y3R1cmVkJyxcbiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICBub3RlczogJ3N0cnVjdHVyZWQgYWRkcmVzczsgcmVxdWlyZWQgaWYgb3Bwb3NpbmdfYWRkcmVzc19rbm93bicsXG4gICAgICAgIH0sXG4gICAgICAgIHsga2V5OiAnc2VydmljZV9jb25jZXJucycsIHR5cGU6ICdib29sZWFuJywgcmVxdWlyZWQ6IGZhbHNlIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBrZXk6ICdvcHBvc2luZ19lbXBsb3ltZW50X3N0YXR1cycsXG4gICAgICAgICAgdHlwZTogJ2VudW0nLFxuICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgICBlbnVtVmFsdWVzOiBbXG4gICAgICAgICAgICAnZW1wbG95ZWRfZnVsbF90aW1lJyxcbiAgICAgICAgICAgICdlbXBsb3llZF9wYXJ0X3RpbWUnLFxuICAgICAgICAgICAgJ3NlbGZfZW1wbG95ZWQnLFxuICAgICAgICAgICAgJ3VuZW1wbG95ZWQnLFxuICAgICAgICAgICAgJ3N0dWRlbnQnLFxuICAgICAgICAgICAgJ3JldGlyZWQnLFxuICAgICAgICAgICAgJ2Rpc2FibGVkJyxcbiAgICAgICAgICAgICd1bmtub3duJyxcbiAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAnbWFycmlhZ2VfZGV0YWlscycsXG4gICAgICB0aXRsZTogJ01BUlJJQUdFIERFVEFJTFMnLFxuICAgICAgZmllbGRzOiBbXG4gICAgICAgIHsga2V5OiAnZGF0ZV9vZl9tYXJyaWFnZScsIHR5cGU6ICdkYXRlJywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICAgICAgeyBrZXk6ICdwbGFjZV9vZl9tYXJyaWFnZScsIHR5cGU6ICd0ZXh0JywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICAgICAgeyBrZXk6ICdkYXRlX29mX3NlcGFyYXRpb24nLCB0eXBlOiAnZGF0ZScsIHJlcXVpcmVkOiB0cnVlLCBub3RlczogJ3JlcXVpcmVkIGlmIHNlcGFyYXRlZCcgfSxcbiAgICAgICAgeyBrZXk6ICdjdXJyZW50bHlfY29oYWJpdGF0aW5nJywgdHlwZTogJ2Jvb2xlYW4nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgICAgICB7IGtleTogJ21hcnJpYWdlX2NlcnRpZmljYXRlX2F2YWlsYWJsZScsIHR5cGU6ICdib29sZWFuJywgcmVxdWlyZWQ6IGZhbHNlIH0sXG4gICAgICBdLFxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICdzZXBhcmF0aW9uX2dyb3VuZHMnLFxuICAgICAgdGl0bGU6ICdTRVBBUkFUSU9OICYgR1JPVU5EUyAoR0VPUkdJQSknLFxuICAgICAgZmllbGRzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBrZXk6ICdncm91bmRzX2Zvcl9kaXZvcmNlJyxcbiAgICAgICAgICB0eXBlOiAnZW51bScsXG4gICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgZW51bVZhbHVlczogW1xuICAgICAgICAgICAgJ25vX2ZhdWx0JyxcbiAgICAgICAgICAgICdhZHVsdGVyeScsXG4gICAgICAgICAgICAnZGVzZXJ0aW9uJyxcbiAgICAgICAgICAgICdjcnVlbF90cmVhdG1lbnQnLFxuICAgICAgICAgICAgJ2hhYml0dWFsX2RydWdfdXNlJyxcbiAgICAgICAgICAgICdtZW50YWxfaW5jYXBhY2l0eScsXG4gICAgICAgICAgICAnaW1wb3RlbmNlJyxcbiAgICAgICAgICAgICdwcmVnbmFuY3lfYnlfYW5vdGhlcicsXG4gICAgICAgICAgICAnaW5jZXN0JyxcbiAgICAgICAgICAgICdjb252aWN0aW9uX29mX2ZlbG9ueScsXG4gICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGtleTogJ2ZhdWx0X2FsbGVnYXRpb25zJyxcbiAgICAgICAgICB0eXBlOiAnbXVsdGlzZWxlY3QnLFxuICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgICBlbnVtVmFsdWVzOiBbXG4gICAgICAgICAgICAnYWR1bHRlcnknLFxuICAgICAgICAgICAgJ2Rlc2VydGlvbicsXG4gICAgICAgICAgICAnY3J1ZWxfdHJlYXRtZW50JyxcbiAgICAgICAgICAgICdoYWJpdHVhbF9kcnVnX3VzZScsXG4gICAgICAgICAgICAnbWVudGFsX2luY2FwYWNpdHknLFxuICAgICAgICAgICAgJ2ltcG90ZW5jZScsXG4gICAgICAgICAgICAncHJlZ25hbmN5X2J5X2Fub3RoZXInLFxuICAgICAgICAgICAgJ2luY2VzdCcsXG4gICAgICAgICAgICAnY29udmljdGlvbl9vZl9mZWxvbnknLFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICAgIHsga2V5OiAncmVjb25jaWxpYXRpb25fYXR0ZW1wdGVkJywgdHlwZTogJ2Jvb2xlYW4nLCByZXF1aXJlZDogZmFsc2UgfSxcbiAgICAgIF0sXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogJ2NoaWxkX29iamVjdCcsXG4gICAgICB0aXRsZTogJ0NISUxEIE9CSkVDVCAoUkVQRUFUQUJMRSknLFxuICAgICAgZmllbGRzOiBbXG4gICAgICAgIHsga2V5OiAnY2hpbGRfZnVsbF9uYW1lJywgdHlwZTogJ3RleHQnLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgICAgICB7IGtleTogJ2NoaWxkX2RvYicsIHR5cGU6ICdkYXRlJywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICAgICAge1xuICAgICAgICAgIGtleTogJ2NoaWxkX2N1cnJlbnRfcmVzaWRlbmNlJyxcbiAgICAgICAgICB0eXBlOiAnZW51bScsXG4gICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgZW51bVZhbHVlczogWyd3aXRoX2NsaWVudCcsICd3aXRoX29wcG9zaW5nJywgJ3NoYXJlZCcsICd0aGlyZF9wYXJ0eScsICdvdGhlcicsICd1bmtub3duJ10sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBrZXk6ICdiaW9sb2dpY2FsX3JlbGF0aW9uJyxcbiAgICAgICAgICB0eXBlOiAnZW51bScsXG4gICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgZW51bVZhbHVlczogWydjbGllbnQnLCAnb3Bwb3NpbmcnLCAnYm90aCcsICduZWl0aGVyJywgJ3Vua25vd24nXSxcbiAgICAgICAgfSxcbiAgICAgICAgeyBrZXk6ICdzcGVjaWFsX25lZWRzJywgdHlwZTogJ2Jvb2xlYW4nLCByZXF1aXJlZDogZmFsc2UgfSxcbiAgICAgIF0sXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogJ2NoaWxkcmVuX2N1c3RvZHknLFxuICAgICAgdGl0bGU6ICdDSElMRFJFTiAmIENVU1RPRFkgKENVU1RPRFkgU0VUVElOR1MpJyxcbiAgICAgIGZpZWxkczogW1xuICAgICAgICB7XG4gICAgICAgICAga2V5OiAnY3VzdG9keV90eXBlX3JlcXVlc3RlZCcsXG4gICAgICAgICAgdHlwZTogJ2VudW0nLFxuICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgIGVudW1WYWx1ZXM6IFsnbGVnYWxfY3VzdG9keScsICdwaHlzaWNhbF9jdXN0b2R5JywgJ2pvaW50X2N1c3RvZHknLCAnc29sZV9jdXN0b2R5J10sXG4gICAgICAgIH0sXG4gICAgICAgIHsga2V5OiAncGFyZW50aW5nX3BsYW5fZXhpc3RzJywgdHlwZTogJ2Jvb2xlYW4nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgICAgICB7IGtleTogJ2N1cnJlbnRfcGFyZW50aW5nX3NjaGVkdWxlJywgdHlwZTogJ3RleHQnLCByZXF1aXJlZDogZmFsc2UgfSxcbiAgICAgICAgeyBrZXk6ICdzY2hvb2xfZGlzdHJpY3QnLCB0eXBlOiAndGV4dCcsIHJlcXVpcmVkOiBmYWxzZSB9LFxuICAgICAgXSxcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAnYXNzZXRfb2JqZWN0JyxcbiAgICAgIHRpdGxlOiAnQVNTRVQgT0JKRUNUIChSRVBFQVRBQkxFKScsXG4gICAgICBmaWVsZHM6IFtcbiAgICAgICAge1xuICAgICAgICAgIGtleTogJ2Fzc2V0X3R5cGUnLFxuICAgICAgICAgIHR5cGU6ICdlbnVtJyxcbiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICBlbnVtVmFsdWVzOiBbXG4gICAgICAgICAgICAncmVhbF9lc3RhdGUnLFxuICAgICAgICAgICAgJ3ZlaGljbGUnLFxuICAgICAgICAgICAgJ2JhbmtfYWNjb3VudCcsXG4gICAgICAgICAgICAncmV0aXJlbWVudF9hY2NvdW50JyxcbiAgICAgICAgICAgICdpbnZlc3RtZW50X2FjY291bnQnLFxuICAgICAgICAgICAgJ2J1c2luZXNzX2ludGVyZXN0JyxcbiAgICAgICAgICAgICdwZXJzb25hbF9wcm9wZXJ0eScsXG4gICAgICAgICAgICAnb3RoZXInLFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBrZXk6ICdvd25lcnNoaXAnLFxuICAgICAgICAgIHR5cGU6ICdlbnVtJyxcbiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICBlbnVtVmFsdWVzOiBbJ3NvbGVfY2xpZW50JywgJ3NvbGVfb3Bwb3NpbmcnLCAnam9pbnQnLCAndGhpcmRfcGFydHknLCAndW5rbm93biddLFxuICAgICAgICB9LFxuICAgICAgICB7IGtleTogJ2VzdGltYXRlZF92YWx1ZScsIHR5cGU6ICdudW1iZXInLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgICAgICB7XG4gICAgICAgICAga2V5OiAndGl0bGVfaG9sZGVyJyxcbiAgICAgICAgICB0eXBlOiAnZW51bScsXG4gICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgZW51bVZhbHVlczogWydjbGllbnQnLCAnb3Bwb3NpbmcnLCAnYm90aCcsICd0aGlyZF9wYXJ0eScsICd1bmtub3duJ10sXG4gICAgICAgIH0sXG4gICAgICAgIHsga2V5OiAnYWNxdWlyZWRfcHJlX21hcnJpYWdlJywgdHlwZTogJ2Jvb2xlYW4nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgICAgXSxcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAnaW5jb21lX3N1cHBvcnQnLFxuICAgICAgdGl0bGU6ICdJTkNPTUUgJiBTVVBQT1JUJyxcbiAgICAgIGZpZWxkczogW1xuICAgICAgICB7IGtleTogJ2NsaWVudF9pbmNvbWVfbW9udGhseScsIHR5cGU6ICdudW1iZXInLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgICAgICB7IGtleTogJ29wcG9zaW5nX2luY29tZV9rbm93bicsIHR5cGU6ICdib29sZWFuJywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICAgICAge1xuICAgICAgICAgIGtleTogJ3N1cHBvcnRfcmVxdWVzdGVkJyxcbiAgICAgICAgICB0eXBlOiAnZW51bScsXG4gICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgZW51bVZhbHVlczogWydjaGlsZF9zdXBwb3J0JywgJ3Nwb3VzYWxfc3VwcG9ydCcsICdib3RoJ10sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBrZXk6ICdjaGlsZF9zdXBwb3J0X2VzdGltYXRlJyxcbiAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgICAgICAgaXNTeXN0ZW06IHRydWUsXG4gICAgICAgICAgbm90ZXM6ICdzeXN0ZW0tb25seScsXG4gICAgICAgIH0sXG4gICAgICAgIHsga2V5OiAnYWxpbW9ueV9yZXF1ZXN0ZWQnLCB0eXBlOiAnYm9vbGVhbicsIHJlcXVpcmVkOiBmYWxzZSB9LFxuICAgICAgXSxcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAnZGVidF9vYmplY3QnLFxuICAgICAgdGl0bGU6ICdERUJUIE9CSkVDVCAoUkVQRUFUQUJMRSknLFxuICAgICAgZmllbGRzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBrZXk6ICdkZWJ0X3R5cGUnLFxuICAgICAgICAgIHR5cGU6ICdlbnVtJyxcbiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICBlbnVtVmFsdWVzOiBbXG4gICAgICAgICAgICAnY3JlZGl0X2NhcmQnLFxuICAgICAgICAgICAgJ3N0dWRlbnRfbG9hbicsXG4gICAgICAgICAgICAnYXV0b19sb2FuJyxcbiAgICAgICAgICAgICdtb3J0Z2FnZScsXG4gICAgICAgICAgICAnbWVkaWNhbF9kZWJ0JyxcbiAgICAgICAgICAgICd0YXhfZGVidCcsXG4gICAgICAgICAgICAncGVyc29uYWxfbG9hbicsXG4gICAgICAgICAgICAnb3RoZXInLFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICAgIHsga2V5OiAnYW1vdW50JywgdHlwZTogJ251bWJlcicsIHJlcXVpcmVkOiB0cnVlIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBrZXk6ICdyZXNwb25zaWJsZV9wYXJ0eScsXG4gICAgICAgICAgdHlwZTogJ2VudW0nLFxuICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgIGVudW1WYWx1ZXM6IFsnY2xpZW50JywgJ29wcG9zaW5nJywgJ2JvdGgnLCAndGhpcmRfcGFydHknLCAndW5rbm93biddLFxuICAgICAgICB9LFxuICAgICAgICB7IGtleTogJ2luY3VycmVkX2R1cmluZ19tYXJyaWFnZScsIHR5cGU6ICdib29sZWFuJywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICAgIF0sXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogJ2RvbWVzdGljX3Zpb2xlbmNlX3Jpc2snLFxuICAgICAgdGl0bGU6ICdET01FU1RJQyBWSU9MRU5DRSAvIFJJU0snLFxuICAgICAgZmllbGRzOiBbXG4gICAgICAgIHsga2V5OiAnZHZfcHJlc2VudCcsIHR5cGU6ICdib29sZWFuJywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICAgICAgeyBrZXk6ICdwcm90ZWN0aXZlX29yZGVyX2V4aXN0cycsIHR5cGU6ICdib29sZWFuJywgcmVxdWlyZWQ6IHRydWUsIG5vdGVzOiAncmVxdWlyZWQgaWYgZHZfcHJlc2VudCcgfSxcbiAgICAgICAgeyBrZXk6ICdpbW1lZGlhdGVfc2FmZXR5X2NvbmNlcm5zJywgdHlwZTogJ2Jvb2xlYW4nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgICAgICB7IGtleTogJ2NoaWxkcmVuX2V4cG9zZWQnLCB0eXBlOiAnYm9vbGVhbicsIHJlcXVpcmVkOiBmYWxzZSB9LFxuICAgICAgXSxcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAnanVyaXNkaWN0aW9uX3ZlbnVlJyxcbiAgICAgIHRpdGxlOiAnSlVSSVNESUNUSU9OICYgVkVOVUUnLFxuICAgICAgZmllbGRzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBrZXk6ICdjb3VudHlfb2ZfZmlsaW5nJyxcbiAgICAgICAgICB0eXBlOiAnZW51bScsXG4gICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgbm90ZXM6ICdDU1YtZGVyaXZlZCAoZG9jcy9nYV9jb3VudGllcy5jc3YpJyxcbiAgICAgICAgfSxcbiAgICAgICAgeyBrZXk6ICdyZXNpZGVuY3lfZHVyYXRpb25fbW9udGhzJywgdHlwZTogJ251bWJlcicsIHJlcXVpcmVkOiB0cnVlIH0sXG4gICAgICAgIHsga2V5OiAndmVudWVfY29uZmlybWVkJywgdHlwZTogJ2Jvb2xlYW4nLCByZXF1aXJlZDogZmFsc2UsIGlzU3lzdGVtOiB0cnVlIH0sXG4gICAgICBdLFxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICdwcmlvcl9sZWdhbF9hY3Rpb25zJyxcbiAgICAgIHRpdGxlOiAnUFJJT1IgTEVHQUwgQUNUSU9OUycsXG4gICAgICBmaWVsZHM6IFtcbiAgICAgICAgeyBrZXk6ICdwcmlvcl9kaXZvcmNlX2ZpbGluZ3MnLCB0eXBlOiAnYm9vbGVhbicsIHJlcXVpcmVkOiB0cnVlIH0sXG4gICAgICAgIHsga2V5OiAncHJpb3JfY3VzdG9keV9vcmRlcnMnLCB0eXBlOiAnYm9vbGVhbicsIHJlcXVpcmVkOiB0cnVlIH0sXG4gICAgICAgIHsga2V5OiAnY2FzZV9udW1iZXJzJywgdHlwZTogJ3RleHQnLCByZXF1aXJlZDogZmFsc2UgfSxcbiAgICAgICAgeyBrZXk6ICdleGlzdGluZ19hdHRvcm5leScsIHR5cGU6ICdib29sZWFuJywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICAgIF0sXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogJ2Rlc2lyZWRfb3V0Y29tZXMnLFxuICAgICAgdGl0bGU6ICdERVNJUkVEIE9VVENPTUVTJyxcbiAgICAgIGZpZWxkczogW1xuICAgICAgICB7XG4gICAgICAgICAga2V5OiAncHJpbWFyeV9nb2FsJyxcbiAgICAgICAgICB0eXBlOiAnZW51bScsXG4gICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgZW51bVZhbHVlczogW1xuICAgICAgICAgICAgJ2Rpdm9yY2VfZmluYWxpemF0aW9uJyxcbiAgICAgICAgICAgICdjdXN0b2R5X2RldGVybWluYXRpb24nLFxuICAgICAgICAgICAgJ2N1c3RvZHlfbW9kaWZpY2F0aW9uJyxcbiAgICAgICAgICAgICdzdXBwb3J0X2VzdGFibGlzaG1lbnQnLFxuICAgICAgICAgICAgJ3N1cHBvcnRfbW9kaWZpY2F0aW9uJyxcbiAgICAgICAgICAgICdwcm9wZXJ0eV9kaXZpc2lvbicsXG4gICAgICAgICAgICAncHJvdGVjdGl2ZV9yZWxpZWYnLFxuICAgICAgICAgICAgJ2xlZ2FsX2d1aWRhbmNlJyxcbiAgICAgICAgICAgICdvdGhlcicsXG4gICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGtleTogJ3NldHRsZW1lbnRfcHJlZmVyZW5jZScsXG4gICAgICAgICAgdHlwZTogJ2VudW0nLFxuICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgIGVudW1WYWx1ZXM6IFtcbiAgICAgICAgICAgICdzdHJvbmdseV9wcmVmZXJfc2V0dGxlbWVudCcsXG4gICAgICAgICAgICAncHJlZmVyX3NldHRsZW1lbnQnLFxuICAgICAgICAgICAgJ29wZW5fdG9fZWl0aGVyJyxcbiAgICAgICAgICAgICdwcmVmZXJfbGl0aWdhdGlvbicsXG4gICAgICAgICAgICAnc3Ryb25nbHlfcHJlZmVyX2xpdGlnYXRpb24nLFxuICAgICAgICAgICAgJ3Vuc3VyZScsXG4gICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGtleTogJ2xpdGlnYXRpb25fdG9sZXJhbmNlJyxcbiAgICAgICAgICB0eXBlOiAnZW51bScsXG4gICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgZW51bVZhbHVlczogWydsb3cnLCAnbW9kZXJhdGUnLCAnaGlnaCcsICd1bmtub3duJ10sXG4gICAgICAgIH0sXG4gICAgICAgIHsga2V5OiAnbm9uX25lZ290aWFibGVzJywgdHlwZTogJ3RleHQnLCByZXF1aXJlZDogZmFsc2UgfSxcbiAgICAgIF0sXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogJ2V2aWRlbmNlX2RvY3VtZW50cycsXG4gICAgICB0aXRsZTogJ0VWSURFTkNFICYgRE9DVU1FTlRTJyxcbiAgICAgIGZpZWxkczogW1xuICAgICAgICB7XG4gICAgICAgICAga2V5OiAnZG9jdW1lbnRfdHlwZScsXG4gICAgICAgICAgdHlwZTogJ2VudW0nLFxuICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgICBlbnVtVmFsdWVzOiBbXG4gICAgICAgICAgICAncGF5X3N0dWInLFxuICAgICAgICAgICAgJ3RheF9yZXR1cm4nLFxuICAgICAgICAgICAgJ2Jhbmtfc3RhdGVtZW50JyxcbiAgICAgICAgICAgICdmaW5hbmNpYWxfc3RhdGVtZW50JyxcbiAgICAgICAgICAgICdyZWFsX2VzdGF0ZV9kb2N1bWVudCcsXG4gICAgICAgICAgICAndmVoaWNsZV90aXRsZScsXG4gICAgICAgICAgICAncmV0aXJlbWVudF9zdGF0ZW1lbnQnLFxuICAgICAgICAgICAgJ2J1c2luZXNzX3JlY29yZCcsXG4gICAgICAgICAgICAndGV4dF9tZXNzYWdlJyxcbiAgICAgICAgICAgICdlbWFpbCcsXG4gICAgICAgICAgICAncGhvdG8nLFxuICAgICAgICAgICAgJ3ZpZGVvJyxcbiAgICAgICAgICAgICdwb2xpY2VfcmVwb3J0JyxcbiAgICAgICAgICAgICdjb3VydF9vcmRlcicsXG4gICAgICAgICAgICAncHJvdGVjdGl2ZV9vcmRlcicsXG4gICAgICAgICAgICAnbWVkaWNhbF9yZWNvcmQnLFxuICAgICAgICAgICAgJ3NjaG9vbF9yZWNvcmQnLFxuICAgICAgICAgICAgJ290aGVyJyxcbiAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgICB7IGtleTogJ3VwbG9hZGVkJywgdHlwZTogJ2Jvb2xlYW4nLCByZXF1aXJlZDogZmFsc2UgfSxcbiAgICAgICAge1xuICAgICAgICAgIGtleTogJ21pc3NpbmdfcmVxdWlyZWRfZG9jcycsXG4gICAgICAgICAgdHlwZTogJ2xpc3QnLFxuICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgICBpc1N5c3RlbTogdHJ1ZSxcbiAgICAgICAgICBub3RlczogJ3N5c3RlbS1vbmx5JyxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSxcbiAgXSxcbn07XG5cbmV4cG9ydCBjb25zdCBHQV9ESVZPUkNFX0NVU1RPRFlfVjFfQUlfRkxBR1M6IEFpRmxhZ0RlZltdID0gW1xuICB7IGtleTogJ2p1cmlzZGljdGlvbl9yaXNrJywgdHJpZ2dlcjogJ1Jlc2lkZW5jeSAvIHZlbnVlIG1pc21hdGNoJyB9LFxuICB7IGtleTogJ2R2X3Jpc2snLCB0cmlnZ2VyOiAnRFYgaW5kaWNhdGVkICsgd2VhcG9ucyBwcmVzZW50JyB9LFxuICB7IGtleTogJ2N1c3RvZHlfY29tcGxleGl0eScsIHRyaWdnZXI6ICdNdWx0aXBsZSBjaGlsZHJlbiArIHNwZWNpYWwgbmVlZHMnIH0sXG4gIHsga2V5OiAnYXNzZXRfY29tcGxleGl0eScsIHRyaWdnZXI6ICdCdXNpbmVzcyAvIGhpZ2gtdmFsdWUgYXNzZXRzIGRldGVjdGVkJyB9LFxuICB7IGtleTogJ3N1cHBvcnRfY29tcGxleGl0eScsIHRyaWdnZXI6ICdTdXBwb3J0IHJlcXVlc3RlZCArIGluY29tZSBkaXNwYXJpdHknIH0sXG4gIHsga2V5OiAnbWlzc2luZ19yZXF1aXJlZCcsIHRyaWdnZXI6ICdSZXF1aXJlZCBmaWVsZHMgbWlzc2luZyBhdCBzdWJtaXNzaW9uJyB9LFxuXTtcbiJdLCJuYW1lcyI6WyJHQV9ESVZPUkNFX0NVU1RPRFlfVjEiLCJ2ZXJzaW9uIiwic2VjdGlvbnMiLCJpZCIsInRpdGxlIiwiZmllbGRzIiwia2V5IiwidHlwZSIsInJlcXVpcmVkIiwibm90ZXMiLCJlbnVtVmFsdWVzIiwiaXNTeXN0ZW0iLCJHQV9ESVZPUkNFX0NVU1RPRFlfVjFfQUlfRkxBR1MiLCJ0cmlnZ2VyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/../../lib/intake/schema/gaDivorceCustodyV1.ts\n");

/***/ }),

/***/ "(api-node)/../../lib/server/intakeToken.ts":
/*!***************************************!*\
  !*** ../../lib/server/intakeToken.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createIntakeToken: () => (/* binding */ createIntakeToken),\n/* harmony export */   verifyIntakeToken: () => (/* binding */ verifyIntakeToken)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n\nif (false) {}\nconst INTAKE_TOKEN_SECRET = process.env.INTAKE_TOKEN_SECRET;\nif (!INTAKE_TOKEN_SECRET) {\n    throw new Error('Missing INTAKE_TOKEN_SECRET');\n}\nconst TOKEN_VERSION = 1;\nconst DEFAULT_TOKEN_TTL_SECONDS = 60 * 60 * 24 * 30;\nfunction base64UrlEncode(input) {\n    const buffer = typeof input === 'string' ? Buffer.from(input, 'utf8') : input;\n    return buffer.toString('base64').replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=+$/g, '');\n}\nfunction base64UrlDecode(input) {\n    const normalized = input.replace(/-/g, '+').replace(/_/g, '/');\n    const padded = normalized.padEnd(Math.ceil(normalized.length / 4) * 4, '=');\n    return Buffer.from(padded, 'base64');\n}\nfunction signPayload(payloadB64) {\n    const signature = crypto__WEBPACK_IMPORTED_MODULE_0___default().createHmac('sha256', INTAKE_TOKEN_SECRET).update(payloadB64).digest();\n    return base64UrlEncode(signature);\n}\nfunction createIntakeToken(params) {\n    const exp = Math.floor(Date.now() / 1000) + (params.expiresInSeconds ?? DEFAULT_TOKEN_TTL_SECONDS);\n    const payload = {\n        firm_id: params.firmId,\n        intake_id: params.intakeId,\n        exp,\n        v: TOKEN_VERSION\n    };\n    const payloadB64 = base64UrlEncode(JSON.stringify(payload));\n    const signatureB64 = signPayload(payloadB64);\n    return `${payloadB64}.${signatureB64}`;\n}\nfunction verifyIntakeToken(token) {\n    const parts = token.split('.');\n    if (parts.length !== 2) {\n        return {\n            ok: false,\n            status: 401,\n            error: 'Invalid intake token'\n        };\n    }\n    const [payloadB64, signatureB64] = parts;\n    const expectedSignature = signPayload(payloadB64);\n    const signatureBuffer = Buffer.from(signatureB64, 'utf8');\n    const expectedBuffer = Buffer.from(expectedSignature, 'utf8');\n    if (signatureBuffer.length !== expectedBuffer.length) {\n        return {\n            ok: false,\n            status: 401,\n            error: 'Invalid intake token'\n        };\n    }\n    if (!crypto__WEBPACK_IMPORTED_MODULE_0___default().timingSafeEqual(signatureBuffer, expectedBuffer)) {\n        return {\n            ok: false,\n            status: 401,\n            error: 'Invalid intake token'\n        };\n    }\n    let payload;\n    try {\n        payload = JSON.parse(base64UrlDecode(payloadB64).toString('utf8'));\n    } catch  {\n        return {\n            ok: false,\n            status: 401,\n            error: 'Invalid intake token'\n        };\n    }\n    if (!payload.firm_id || !payload.intake_id || typeof payload.exp !== 'number') {\n        return {\n            ok: false,\n            status: 401,\n            error: 'Invalid intake token'\n        };\n    }\n    if (payload.v !== TOKEN_VERSION) {\n        return {\n            ok: false,\n            status: 401,\n            error: 'Invalid intake token'\n        };\n    }\n    if (payload.exp <= Math.floor(Date.now() / 1000)) {\n        return {\n            ok: false,\n            status: 403,\n            error: 'Intake token expired'\n        };\n    }\n    return {\n        ok: true,\n        payload\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uLi8uLi9saWIvc2VydmVyL2ludGFrZVRva2VuLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBNEI7QUFFNUIsSUFBSSxLQUE2QixFQUFFLEVBRWxDO0FBRUQsTUFBTUUsc0JBQXNCQyxRQUFRQyxHQUFHLENBQUNGLG1CQUFtQjtBQUUzRCxJQUFJLENBQUNBLHFCQUFxQjtJQUN4QixNQUFNLElBQUlELE1BQU07QUFDbEI7QUFFQSxNQUFNSSxnQkFBZ0I7QUFDdEIsTUFBTUMsNEJBQTRCLEtBQUssS0FBSyxLQUFLO0FBYWpELFNBQVNDLGdCQUFnQkMsS0FBc0I7SUFDN0MsTUFBTUMsU0FBUyxPQUFPRCxVQUFVLFdBQVdFLE9BQU9DLElBQUksQ0FBQ0gsT0FBTyxVQUFVQTtJQUN4RSxPQUFPQyxPQUNKRyxRQUFRLENBQUMsVUFDVEMsT0FBTyxDQUFDLE9BQU8sS0FDZkEsT0FBTyxDQUFDLE9BQU8sS0FDZkEsT0FBTyxDQUFDLFFBQVE7QUFDckI7QUFFQSxTQUFTQyxnQkFBZ0JOLEtBQWE7SUFDcEMsTUFBTU8sYUFBYVAsTUFBTUssT0FBTyxDQUFDLE1BQU0sS0FBS0EsT0FBTyxDQUFDLE1BQU07SUFDMUQsTUFBTUcsU0FBU0QsV0FBV0UsTUFBTSxDQUFDQyxLQUFLQyxJQUFJLENBQUNKLFdBQVdLLE1BQU0sR0FBRyxLQUFLLEdBQUc7SUFDdkUsT0FBT1YsT0FBT0MsSUFBSSxDQUFDSyxRQUFRO0FBQzdCO0FBRUEsU0FBU0ssWUFBWUMsVUFBa0I7SUFDckMsTUFBTUMsWUFBWXZCLHdEQUNMLENBQUMsVUFBVUUscUJBQ3JCdUIsTUFBTSxDQUFDSCxZQUNQSSxNQUFNO0lBQ1QsT0FBT25CLGdCQUFnQmdCO0FBQ3pCO0FBRU8sU0FBU0ksa0JBQWtCQyxNQUlqQztJQUNDLE1BQU1DLE1BQU1YLEtBQUtZLEtBQUssQ0FBQ0MsS0FBS0MsR0FBRyxLQUFLLFFBQy9CSixDQUFBQSxPQUFPSyxnQkFBZ0IsSUFBSTNCLHlCQUF3QjtJQUV4RCxNQUFNNEIsVUFBOEI7UUFDbENDLFNBQVNQLE9BQU9RLE1BQU07UUFDdEJDLFdBQVdULE9BQU9VLFFBQVE7UUFDMUJUO1FBQ0FVLEdBQUdsQztJQUNMO0lBRUEsTUFBTWlCLGFBQWFmLGdCQUFnQmlDLEtBQUtDLFNBQVMsQ0FBQ1A7SUFDbEQsTUFBTVEsZUFBZXJCLFlBQVlDO0lBQ2pDLE9BQU8sR0FBR0EsV0FBVyxDQUFDLEVBQUVvQixjQUFjO0FBQ3hDO0FBRU8sU0FBU0Msa0JBQWtCQyxLQUFhO0lBQzdDLE1BQU1DLFFBQVFELE1BQU1FLEtBQUssQ0FBQztJQUMxQixJQUFJRCxNQUFNekIsTUFBTSxLQUFLLEdBQUc7UUFDdEIsT0FBTztZQUFFMkIsSUFBSTtZQUFPQyxRQUFRO1lBQUtDLE9BQU87UUFBdUI7SUFDakU7SUFFQSxNQUFNLENBQUMzQixZQUFZb0IsYUFBYSxHQUFHRztJQUNuQyxNQUFNSyxvQkFBb0I3QixZQUFZQztJQUV0QyxNQUFNNkIsa0JBQWtCekMsT0FBT0MsSUFBSSxDQUFDK0IsY0FBYztJQUNsRCxNQUFNVSxpQkFBaUIxQyxPQUFPQyxJQUFJLENBQUN1QyxtQkFBbUI7SUFDdEQsSUFBSUMsZ0JBQWdCL0IsTUFBTSxLQUFLZ0MsZUFBZWhDLE1BQU0sRUFBRTtRQUNwRCxPQUFPO1lBQUUyQixJQUFJO1lBQU9DLFFBQVE7WUFBS0MsT0FBTztRQUF1QjtJQUNqRTtJQUVBLElBQUksQ0FBQ2pELDZEQUFzQixDQUFDbUQsaUJBQWlCQyxpQkFBaUI7UUFDNUQsT0FBTztZQUFFTCxJQUFJO1lBQU9DLFFBQVE7WUFBS0MsT0FBTztRQUF1QjtJQUNqRTtJQUVBLElBQUlmO0lBQ0osSUFBSTtRQUNGQSxVQUFVTSxLQUFLYyxLQUFLLENBQUN4QyxnQkFBZ0JRLFlBQVlWLFFBQVEsQ0FBQztJQUM1RCxFQUFFLE9BQU07UUFDTixPQUFPO1lBQUVtQyxJQUFJO1lBQU9DLFFBQVE7WUFBS0MsT0FBTztRQUF1QjtJQUNqRTtJQUVBLElBQUksQ0FBQ2YsUUFBUUMsT0FBTyxJQUFJLENBQUNELFFBQVFHLFNBQVMsSUFBSSxPQUFPSCxRQUFRTCxHQUFHLEtBQUssVUFBVTtRQUM3RSxPQUFPO1lBQUVrQixJQUFJO1lBQU9DLFFBQVE7WUFBS0MsT0FBTztRQUF1QjtJQUNqRTtJQUVBLElBQUlmLFFBQVFLLENBQUMsS0FBS2xDLGVBQWU7UUFDL0IsT0FBTztZQUFFMEMsSUFBSTtZQUFPQyxRQUFRO1lBQUtDLE9BQU87UUFBdUI7SUFDakU7SUFFQSxJQUFJZixRQUFRTCxHQUFHLElBQUlYLEtBQUtZLEtBQUssQ0FBQ0MsS0FBS0MsR0FBRyxLQUFLLE9BQU87UUFDaEQsT0FBTztZQUFFZSxJQUFJO1lBQU9DLFFBQVE7WUFBS0MsT0FBTztRQUF1QjtJQUNqRTtJQUVBLE9BQU87UUFBRUYsSUFBSTtRQUFNYjtJQUFRO0FBQzdCIiwic291cmNlcyI6WyIvVXNlcnMvZG9taW5pY3JhbmdoaWFzY2kvdmVyaWxleC1sYW5kaW5nL2xpYi9zZXJ2ZXIvaW50YWtlVG9rZW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNyeXB0byBmcm9tICdjcnlwdG8nO1xuXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgdGhyb3cgbmV3IEVycm9yKCdpbnRha2VUb2tlbiBpcyBzZXJ2ZXItb25seScpO1xufVxuXG5jb25zdCBJTlRBS0VfVE9LRU5fU0VDUkVUID0gcHJvY2Vzcy5lbnYuSU5UQUtFX1RPS0VOX1NFQ1JFVDtcblxuaWYgKCFJTlRBS0VfVE9LRU5fU0VDUkVUKSB7XG4gIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBJTlRBS0VfVE9LRU5fU0VDUkVUJyk7XG59XG5cbmNvbnN0IFRPS0VOX1ZFUlNJT04gPSAxO1xuY29uc3QgREVGQVVMVF9UT0tFTl9UVExfU0VDT05EUyA9IDYwICogNjAgKiAyNCAqIDMwO1xuXG5leHBvcnQgdHlwZSBJbnRha2VUb2tlblBheWxvYWQgPSB7XG4gIGZpcm1faWQ6IHN0cmluZztcbiAgaW50YWtlX2lkOiBzdHJpbmc7XG4gIGV4cDogbnVtYmVyO1xuICB2OiBudW1iZXI7XG59O1xuXG50eXBlIFZlcmlmeVJlc3VsdCA9XG4gIHwgeyBvazogdHJ1ZTsgcGF5bG9hZDogSW50YWtlVG9rZW5QYXlsb2FkIH1cbiAgfCB7IG9rOiBmYWxzZTsgc3RhdHVzOiBudW1iZXI7IGVycm9yOiBzdHJpbmcgfTtcblxuZnVuY3Rpb24gYmFzZTY0VXJsRW5jb2RlKGlucHV0OiBCdWZmZXIgfCBzdHJpbmcpIHtcbiAgY29uc3QgYnVmZmVyID0gdHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJyA/IEJ1ZmZlci5mcm9tKGlucHV0LCAndXRmOCcpIDogaW5wdXQ7XG4gIHJldHVybiBidWZmZXJcbiAgICAudG9TdHJpbmcoJ2Jhc2U2NCcpXG4gICAgLnJlcGxhY2UoL1xcKy9nLCAnLScpXG4gICAgLnJlcGxhY2UoL1xcLy9nLCAnXycpXG4gICAgLnJlcGxhY2UoLz0rJC9nLCAnJyk7XG59XG5cbmZ1bmN0aW9uIGJhc2U2NFVybERlY29kZShpbnB1dDogc3RyaW5nKSB7XG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSBpbnB1dC5yZXBsYWNlKC8tL2csICcrJykucmVwbGFjZSgvXy9nLCAnLycpO1xuICBjb25zdCBwYWRkZWQgPSBub3JtYWxpemVkLnBhZEVuZChNYXRoLmNlaWwobm9ybWFsaXplZC5sZW5ndGggLyA0KSAqIDQsICc9Jyk7XG4gIHJldHVybiBCdWZmZXIuZnJvbShwYWRkZWQsICdiYXNlNjQnKTtcbn1cblxuZnVuY3Rpb24gc2lnblBheWxvYWQocGF5bG9hZEI2NDogc3RyaW5nKSB7XG4gIGNvbnN0IHNpZ25hdHVyZSA9IGNyeXB0b1xuICAgIC5jcmVhdGVIbWFjKCdzaGEyNTYnLCBJTlRBS0VfVE9LRU5fU0VDUkVUKVxuICAgIC51cGRhdGUocGF5bG9hZEI2NClcbiAgICAuZGlnZXN0KCk7XG4gIHJldHVybiBiYXNlNjRVcmxFbmNvZGUoc2lnbmF0dXJlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUludGFrZVRva2VuKHBhcmFtczoge1xuICBmaXJtSWQ6IHN0cmluZztcbiAgaW50YWtlSWQ6IHN0cmluZztcbiAgZXhwaXJlc0luU2Vjb25kcz86IG51bWJlcjtcbn0pIHtcbiAgY29uc3QgZXhwID0gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMClcbiAgICArIChwYXJhbXMuZXhwaXJlc0luU2Vjb25kcyA/PyBERUZBVUxUX1RPS0VOX1RUTF9TRUNPTkRTKTtcblxuICBjb25zdCBwYXlsb2FkOiBJbnRha2VUb2tlblBheWxvYWQgPSB7XG4gICAgZmlybV9pZDogcGFyYW1zLmZpcm1JZCxcbiAgICBpbnRha2VfaWQ6IHBhcmFtcy5pbnRha2VJZCxcbiAgICBleHAsXG4gICAgdjogVE9LRU5fVkVSU0lPTixcbiAgfTtcblxuICBjb25zdCBwYXlsb2FkQjY0ID0gYmFzZTY0VXJsRW5jb2RlKEpTT04uc3RyaW5naWZ5KHBheWxvYWQpKTtcbiAgY29uc3Qgc2lnbmF0dXJlQjY0ID0gc2lnblBheWxvYWQocGF5bG9hZEI2NCk7XG4gIHJldHVybiBgJHtwYXlsb2FkQjY0fS4ke3NpZ25hdHVyZUI2NH1gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmVyaWZ5SW50YWtlVG9rZW4odG9rZW46IHN0cmluZyk6IFZlcmlmeVJlc3VsdCB7XG4gIGNvbnN0IHBhcnRzID0gdG9rZW4uc3BsaXQoJy4nKTtcbiAgaWYgKHBhcnRzLmxlbmd0aCAhPT0gMikge1xuICAgIHJldHVybiB7IG9rOiBmYWxzZSwgc3RhdHVzOiA0MDEsIGVycm9yOiAnSW52YWxpZCBpbnRha2UgdG9rZW4nIH07XG4gIH1cblxuICBjb25zdCBbcGF5bG9hZEI2NCwgc2lnbmF0dXJlQjY0XSA9IHBhcnRzO1xuICBjb25zdCBleHBlY3RlZFNpZ25hdHVyZSA9IHNpZ25QYXlsb2FkKHBheWxvYWRCNjQpO1xuXG4gIGNvbnN0IHNpZ25hdHVyZUJ1ZmZlciA9IEJ1ZmZlci5mcm9tKHNpZ25hdHVyZUI2NCwgJ3V0ZjgnKTtcbiAgY29uc3QgZXhwZWN0ZWRCdWZmZXIgPSBCdWZmZXIuZnJvbShleHBlY3RlZFNpZ25hdHVyZSwgJ3V0ZjgnKTtcbiAgaWYgKHNpZ25hdHVyZUJ1ZmZlci5sZW5ndGggIT09IGV4cGVjdGVkQnVmZmVyLmxlbmd0aCkge1xuICAgIHJldHVybiB7IG9rOiBmYWxzZSwgc3RhdHVzOiA0MDEsIGVycm9yOiAnSW52YWxpZCBpbnRha2UgdG9rZW4nIH07XG4gIH1cblxuICBpZiAoIWNyeXB0by50aW1pbmdTYWZlRXF1YWwoc2lnbmF0dXJlQnVmZmVyLCBleHBlY3RlZEJ1ZmZlcikpIHtcbiAgICByZXR1cm4geyBvazogZmFsc2UsIHN0YXR1czogNDAxLCBlcnJvcjogJ0ludmFsaWQgaW50YWtlIHRva2VuJyB9O1xuICB9XG5cbiAgbGV0IHBheWxvYWQ6IEludGFrZVRva2VuUGF5bG9hZDtcbiAgdHJ5IHtcbiAgICBwYXlsb2FkID0gSlNPTi5wYXJzZShiYXNlNjRVcmxEZWNvZGUocGF5bG9hZEI2NCkudG9TdHJpbmcoJ3V0ZjgnKSkgYXMgSW50YWtlVG9rZW5QYXlsb2FkO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4geyBvazogZmFsc2UsIHN0YXR1czogNDAxLCBlcnJvcjogJ0ludmFsaWQgaW50YWtlIHRva2VuJyB9O1xuICB9XG5cbiAgaWYgKCFwYXlsb2FkLmZpcm1faWQgfHwgIXBheWxvYWQuaW50YWtlX2lkIHx8IHR5cGVvZiBwYXlsb2FkLmV4cCAhPT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4geyBvazogZmFsc2UsIHN0YXR1czogNDAxLCBlcnJvcjogJ0ludmFsaWQgaW50YWtlIHRva2VuJyB9O1xuICB9XG5cbiAgaWYgKHBheWxvYWQudiAhPT0gVE9LRU5fVkVSU0lPTikge1xuICAgIHJldHVybiB7IG9rOiBmYWxzZSwgc3RhdHVzOiA0MDEsIGVycm9yOiAnSW52YWxpZCBpbnRha2UgdG9rZW4nIH07XG4gIH1cblxuICBpZiAocGF5bG9hZC5leHAgPD0gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMCkpIHtcbiAgICByZXR1cm4geyBvazogZmFsc2UsIHN0YXR1czogNDAzLCBlcnJvcjogJ0ludGFrZSB0b2tlbiBleHBpcmVkJyB9O1xuICB9XG5cbiAgcmV0dXJuIHsgb2s6IHRydWUsIHBheWxvYWQgfTtcbn1cbiJdLCJuYW1lcyI6WyJjcnlwdG8iLCJFcnJvciIsIklOVEFLRV9UT0tFTl9TRUNSRVQiLCJwcm9jZXNzIiwiZW52IiwiVE9LRU5fVkVSU0lPTiIsIkRFRkFVTFRfVE9LRU5fVFRMX1NFQ09ORFMiLCJiYXNlNjRVcmxFbmNvZGUiLCJpbnB1dCIsImJ1ZmZlciIsIkJ1ZmZlciIsImZyb20iLCJ0b1N0cmluZyIsInJlcGxhY2UiLCJiYXNlNjRVcmxEZWNvZGUiLCJub3JtYWxpemVkIiwicGFkZGVkIiwicGFkRW5kIiwiTWF0aCIsImNlaWwiLCJsZW5ndGgiLCJzaWduUGF5bG9hZCIsInBheWxvYWRCNjQiLCJzaWduYXR1cmUiLCJjcmVhdGVIbWFjIiwidXBkYXRlIiwiZGlnZXN0IiwiY3JlYXRlSW50YWtlVG9rZW4iLCJwYXJhbXMiLCJleHAiLCJmbG9vciIsIkRhdGUiLCJub3ciLCJleHBpcmVzSW5TZWNvbmRzIiwicGF5bG9hZCIsImZpcm1faWQiLCJmaXJtSWQiLCJpbnRha2VfaWQiLCJpbnRha2VJZCIsInYiLCJKU09OIiwic3RyaW5naWZ5Iiwic2lnbmF0dXJlQjY0IiwidmVyaWZ5SW50YWtlVG9rZW4iLCJ0b2tlbiIsInBhcnRzIiwic3BsaXQiLCJvayIsInN0YXR1cyIsImVycm9yIiwiZXhwZWN0ZWRTaWduYXR1cmUiLCJzaWduYXR1cmVCdWZmZXIiLCJleHBlY3RlZEJ1ZmZlciIsInRpbWluZ1NhZmVFcXVhbCIsInBhcnNlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/../../lib/server/intakeToken.ts\n");

/***/ }),

/***/ "(api-node)/../../lib/server/supabaseAdmin.ts":
/*!*****************************************!*\
  !*** ../../lib/server/supabaseAdmin.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabaseAdmin: () => (/* binding */ supabaseAdmin)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n\nif (false) {}\nconst supabaseUrl = process.env.SUPABASE_URL;\nconst serviceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\nif (!supabaseUrl || !serviceRoleKey) {\n    throw new Error('Missing SUPABASE_URL or SUPABASE_SERVICE_ROLE_KEY');\n}\nconst supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, serviceRoleKey, {\n    auth: {\n        persistSession: false,\n        autoRefreshToken: false\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uLi8uLi9saWIvc2VydmVyL3N1cGFiYXNlQWRtaW4udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXFEO0FBRXJELElBQUksS0FBNkIsRUFBRSxFQUVsQztBQUVELE1BQU1FLGNBQWNDLFFBQVFDLEdBQUcsQ0FBQ0MsWUFBWTtBQUM1QyxNQUFNQyxpQkFBaUJILFFBQVFDLEdBQUcsQ0FBQ0cseUJBQXlCO0FBRTVELElBQUksQ0FBQ0wsZUFBZSxDQUFDSSxnQkFBZ0I7SUFDbkMsTUFBTSxJQUFJTCxNQUFNO0FBQ2xCO0FBRU8sTUFBTU8sZ0JBQWdCUixtRUFBWUEsQ0FBQ0UsYUFBYUksZ0JBQWdCO0lBQ3JFRyxNQUFNO1FBQ0pDLGdCQUFnQjtRQUNoQkMsa0JBQWtCO0lBQ3BCO0FBQ0YsR0FBRyIsInNvdXJjZXMiOlsiL1VzZXJzL2RvbWluaWNyYW5naGlhc2NpL3ZlcmlsZXgtbGFuZGluZy9saWIvc2VydmVyL3N1cGFiYXNlQWRtaW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcblxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gIHRocm93IG5ldyBFcnJvcignc3VwYWJhc2VBZG1pbiBpcyBzZXJ2ZXItb25seScpO1xufVxuXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52LlNVUEFCQVNFX1VSTDtcbmNvbnN0IHNlcnZpY2VSb2xlS2V5ID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWTtcblxuaWYgKCFzdXBhYmFzZVVybCB8fCAhc2VydmljZVJvbGVLZXkpIHtcbiAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIFNVUEFCQVNFX1VSTCBvciBTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZJyk7XG59XG5cbmV4cG9ydCBjb25zdCBzdXBhYmFzZUFkbWluID0gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzZXJ2aWNlUm9sZUtleSwge1xuICBhdXRoOiB7XG4gICAgcGVyc2lzdFNlc3Npb246IGZhbHNlLFxuICAgIGF1dG9SZWZyZXNoVG9rZW46IGZhbHNlLFxuICB9LFxufSk7XG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50IiwiRXJyb3IiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJTVVBBQkFTRV9VUkwiLCJzZXJ2aWNlUm9sZUtleSIsIlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkiLCJzdXBhYmFzZUFkbWluIiwiYXV0aCIsInBlcnNpc3RTZXNzaW9uIiwiYXV0b1JlZnJlc2hUb2tlbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/../../lib/server/supabaseAdmin.ts\n");

/***/ }),

/***/ "(api-node)/../../node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fintake%2Fsubmit&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fintake%2Fsubmit.ts&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fintake%2Fsubmit&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fintake%2Fsubmit.ts&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   handler: () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/api-utils */ \"(api-node)/../../node_modules/next/dist/server/api-utils/index.js\");\n/* harmony import */ var next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/../../node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/../../node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/../../node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_intake_submit_ts__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./pages/api/intake/submit.ts */ \"(api-node)/./pages/api/intake/submit.ts\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(api-node)/../../node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(api-node)/../../node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__);\n\n\n\n\n// Import the userland code.\n\n\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__.hoist)(_pages_api_intake_submit_ts__WEBPACK_IMPORTED_MODULE_4__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__.hoist)(_pages_api_intake_submit_ts__WEBPACK_IMPORTED_MODULE_4__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/intake/submit\",\n        pathname: \"/api/intake/submit\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_intake_submit_ts__WEBPACK_IMPORTED_MODULE_4__,\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || ''\n});\nasync function handler(req, res, ctx) {\n    let srcPage = \"/api/intake/submit\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {}\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return;\n    }\n    const { query, params, prerenderManifest, routerServerContext } = prepareResult;\n    try {\n        const method = req.method || 'GET';\n        const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__.getTracer)();\n        const activeSpan = tracer.getActiveScopeSpan();\n        const onRequestError = routeModule.instrumentationOnRequestError.bind(routeModule);\n        const invokeRouteModule = async (span)=>routeModule.render(req, res, {\n                query: {\n                    ...query,\n                    ...params\n                },\n                params,\n                allowedRevalidateHeaderKeys: [],\n                multiZoneDraftMode: Boolean(false),\n                trustHostHeader: false,\n                // TODO: get this from from runtime env so manifest\n                // doesn't need to load\n                previewProps: prerenderManifest.preview,\n                propagateError: false,\n                dev: routeModule.isDev,\n                page: \"/api/intake/submit\",\n                internalRevalidate: routerServerContext == null ? void 0 : routerServerContext.revalidate,\n                onError: (...args)=>onRequestError(req, ...args)\n            }).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await invokeRouteModule(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, invokeRouteModule));\n        }\n    } catch (err) {\n        // we re-throw in dev to show the error overlay\n        if (routeModule.isDev) {\n            throw err;\n        }\n        // this is technically an invariant as error handling\n        // should be done inside of api-resolver onError\n        (0,next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__.sendError)(res, 500, 'Internal Server Error');\n    } finally{\n        // We don't allow any waitUntil work in pages API routes currently\n        // so if callback is present return with resolved promise since no\n        // pending work\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n    }\n}\n\n//# sourceMappingURL=pages-api.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uLi8uLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmludGFrZSUyRnN1Ym1pdCZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTJGYXBpJTJGaW50YWtlJTJGc3VibWl0LnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUF1RDtBQUNDO0FBQ3VDO0FBQ3JDO0FBQzFEO0FBQ3lEO0FBQ2U7QUFDRjtBQUN0RTtBQUNBLGlFQUFlLHdFQUFLLENBQUMsd0RBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLHdEQUFRO0FBQ3BDO0FBQ0Esd0JBQXdCLHlHQUFtQjtBQUMzQztBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osYUFBYSxPQUFvQyxJQUFJLENBQUU7QUFDdkQsd0JBQXdCLE1BQXVDO0FBQy9ELENBQUM7QUFDTTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxLQUFxQixFQUFFLEVBRTFCO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHdEQUF3RDtBQUNwRTtBQUNBO0FBQ0EsdUJBQXVCLDRFQUFTO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLDZDQUE2QyxFQUE2QztBQUMxRiw0Q0FBNEMsS0FBd0M7QUFDcEYsaUNBQWlDLEtBQW9DO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSxnRkFBYztBQUMvRSwrREFBK0QseUNBQXlDO0FBQ3hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLFFBQVEsRUFBRSxNQUFNO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0Esa0JBQWtCO0FBQ2xCLHVDQUF1QyxRQUFRLEVBQUUsUUFBUTtBQUN6RDtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDViw2RUFBNkUsZ0ZBQWM7QUFDM0YsaUNBQWlDLFFBQVEsRUFBRSxRQUFRO0FBQ25ELDBCQUEwQix1RUFBUTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHFFQUFTO0FBQ2pCLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzZW5kRXJyb3IgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9hcGktdXRpbHNcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXMvYXBpL2ludGFrZS9zdWJtaXQudHNcIjtcbmltcG9ydCB7IGdldFRyYWNlciwgU3BhbktpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvdHJhY2UvdHJhY2VyXCI7XG5pbXBvcnQgeyBCYXNlU2VydmVyU3BhbiB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi90cmFjZS9jb25zdGFudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgJ2RlZmF1bHQnKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsICdjb25maWcnKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvaW50YWtlL3N1Ym1pdFwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2ludGFrZS9zdWJtaXRcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiAnJyxcbiAgICAgICAgZmlsZW5hbWU6ICcnXG4gICAgfSxcbiAgICB1c2VybGFuZCxcbiAgICBkaXN0RGlyOiBwcm9jZXNzLmVudi5fX05FWFRfUkVMQVRJVkVfRElTVF9ESVIgfHwgJycsXG4gICAgcmVsYXRpdmVQcm9qZWN0RGlyOiBwcm9jZXNzLmVudi5fX05FWFRfUkVMQVRJVkVfUFJPSkVDVF9ESVIgfHwgJydcbn0pO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMsIGN0eCkge1xuICAgIGxldCBzcmNQYWdlID0gXCIvYXBpL2ludGFrZS9zdWJtaXRcIjtcbiAgICAvLyB0dXJib3BhY2sgZG9lc24ndCBub3JtYWxpemUgYC9pbmRleGAgaW4gdGhlIHBhZ2UgbmFtZVxuICAgIC8vIHNvIHdlIG5lZWQgdG8gdG8gcHJvY2VzcyBkeW5hbWljIHJvdXRlcyBwcm9wZXJseVxuICAgIC8vIFRPRE86IGZpeCB0dXJib3BhY2sgcHJvdmlkaW5nIGRpZmZlcmluZyB2YWx1ZSBmcm9tIHdlYnBhY2tcbiAgICBpZiAocHJvY2Vzcy5lbnYuVFVSQk9QQUNLKSB7XG4gICAgICAgIHNyY1BhZ2UgPSBzcmNQYWdlLnJlcGxhY2UoL1xcL2luZGV4JC8sICcnKSB8fCAnLyc7XG4gICAgfVxuICAgIGNvbnN0IHByZXBhcmVSZXN1bHQgPSBhd2FpdCByb3V0ZU1vZHVsZS5wcmVwYXJlKHJlcSwgcmVzLCB7XG4gICAgICAgIHNyY1BhZ2VcbiAgICB9KTtcbiAgICBpZiAoIXByZXBhcmVSZXN1bHQpIHtcbiAgICAgICAgcmVzLnN0YXR1c0NvZGUgPSA0MDA7XG4gICAgICAgIHJlcy5lbmQoJ0JhZCBSZXF1ZXN0Jyk7XG4gICAgICAgIGN0eC53YWl0VW50aWwgPT0gbnVsbCA/IHZvaWQgMCA6IGN0eC53YWl0VW50aWwuY2FsbChjdHgsIFByb21pc2UucmVzb2x2ZSgpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB7IHF1ZXJ5LCBwYXJhbXMsIHByZXJlbmRlck1hbmlmZXN0LCByb3V0ZXJTZXJ2ZXJDb250ZXh0IH0gPSBwcmVwYXJlUmVzdWx0O1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG1ldGhvZCA9IHJlcS5tZXRob2QgfHwgJ0dFVCc7XG4gICAgICAgIGNvbnN0IHRyYWNlciA9IGdldFRyYWNlcigpO1xuICAgICAgICBjb25zdCBhY3RpdmVTcGFuID0gdHJhY2VyLmdldEFjdGl2ZVNjb3BlU3BhbigpO1xuICAgICAgICBjb25zdCBvblJlcXVlc3RFcnJvciA9IHJvdXRlTW9kdWxlLmluc3RydW1lbnRhdGlvbk9uUmVxdWVzdEVycm9yLmJpbmQocm91dGVNb2R1bGUpO1xuICAgICAgICBjb25zdCBpbnZva2VSb3V0ZU1vZHVsZSA9IGFzeW5jIChzcGFuKT0+cm91dGVNb2R1bGUucmVuZGVyKHJlcSwgcmVzLCB7XG4gICAgICAgICAgICAgICAgcXVlcnk6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucXVlcnksXG4gICAgICAgICAgICAgICAgICAgIC4uLnBhcmFtc1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcGFyYW1zLFxuICAgICAgICAgICAgICAgIGFsbG93ZWRSZXZhbGlkYXRlSGVhZGVyS2V5czogcHJvY2Vzcy5lbnYuX19ORVhUX0FMTE9XRURfUkVWQUxJREFURV9IRUFERVJTLFxuICAgICAgICAgICAgICAgIG11bHRpWm9uZURyYWZ0TW9kZTogQm9vbGVhbihwcm9jZXNzLmVudi5fX05FWFRfTVVMVElfWk9ORV9EUkFGVF9NT0RFKSxcbiAgICAgICAgICAgICAgICB0cnVzdEhvc3RIZWFkZXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9UUlVTVF9IT1NUX0hFQURFUixcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBnZXQgdGhpcyBmcm9tIGZyb20gcnVudGltZSBlbnYgc28gbWFuaWZlc3RcbiAgICAgICAgICAgICAgICAvLyBkb2Vzbid0IG5lZWQgdG8gbG9hZFxuICAgICAgICAgICAgICAgIHByZXZpZXdQcm9wczogcHJlcmVuZGVyTWFuaWZlc3QucHJldmlldyxcbiAgICAgICAgICAgICAgICBwcm9wYWdhdGVFcnJvcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgZGV2OiByb3V0ZU1vZHVsZS5pc0RldixcbiAgICAgICAgICAgICAgICBwYWdlOiBcIi9hcGkvaW50YWtlL3N1Ym1pdFwiLFxuICAgICAgICAgICAgICAgIGludGVybmFsUmV2YWxpZGF0ZTogcm91dGVyU2VydmVyQ29udGV4dCA9PSBudWxsID8gdm9pZCAwIDogcm91dGVyU2VydmVyQ29udGV4dC5yZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgIG9uRXJyb3I6ICguLi5hcmdzKT0+b25SZXF1ZXN0RXJyb3IocmVxLCAuLi5hcmdzKVxuICAgICAgICAgICAgfSkuZmluYWxseSgoKT0+e1xuICAgICAgICAgICAgICAgIGlmICghc3BhbikgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgICAgICdodHRwLnN0YXR1c19jb2RlJzogcmVzLnN0YXR1c0NvZGUsXG4gICAgICAgICAgICAgICAgICAgICduZXh0LnJzYyc6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm9vdFNwYW5BdHRyaWJ1dGVzID0gdHJhY2VyLmdldFJvb3RTcGFuQXR0cmlidXRlcygpO1xuICAgICAgICAgICAgICAgIC8vIFdlIHdlcmUgdW5hYmxlIHRvIGdldCBhdHRyaWJ1dGVzLCBwcm9iYWJseSBPVEVMIGlzIG5vdCBlbmFibGVkXG4gICAgICAgICAgICAgICAgaWYgKCFyb290U3BhbkF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5zcGFuX3R5cGUnKSAhPT0gQmFzZVNlcnZlclNwYW4uaGFuZGxlUmVxdWVzdCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFVuZXhwZWN0ZWQgcm9vdCBzcGFuIHR5cGUgJyR7cm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5zcGFuX3R5cGUnKX0nLiBQbGVhc2UgcmVwb3J0IHRoaXMgTmV4dC5qcyBpc3N1ZSBodHRwczovL2dpdGh1Yi5jb20vdmVyY2VsL25leHQuanNgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByb3V0ZSA9IHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQucm91dGUnKTtcbiAgICAgICAgICAgICAgICBpZiAocm91dGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGAke21ldGhvZH0gJHtyb3V0ZX1gO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQucm91dGUnOiByb3V0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnbmV4dC5zcGFuX25hbWUnOiBuYW1lXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnVwZGF0ZU5hbWUobmFtZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKGAke21ldGhvZH0gJHtyZXEudXJsfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAvLyBUT0RPOiBhY3RpdmVTcGFuIGNvZGUgcGF0aCBpcyBmb3Igd2hlbiB3cmFwcGVkIGJ5XG4gICAgICAgIC8vIG5leHQtc2VydmVyIGNhbiBiZSByZW1vdmVkIHdoZW4gdGhpcyBpcyBubyBsb25nZXIgdXNlZFxuICAgICAgICBpZiAoYWN0aXZlU3Bhbikge1xuICAgICAgICAgICAgYXdhaXQgaW52b2tlUm91dGVNb2R1bGUoYWN0aXZlU3Bhbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0cmFjZXIud2l0aFByb3BhZ2F0ZWRDb250ZXh0KHJlcS5oZWFkZXJzLCAoKT0+dHJhY2VyLnRyYWNlKEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QsIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbk5hbWU6IGAke21ldGhvZH0gJHtyZXEudXJsfWAsXG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6IFNwYW5LaW5kLlNFUlZFUixcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAubWV0aG9kJzogbWV0aG9kLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAudGFyZ2V0JzogcmVxLnVybFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgaW52b2tlUm91dGVNb2R1bGUpKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAvLyB3ZSByZS10aHJvdyBpbiBkZXYgdG8gc2hvdyB0aGUgZXJyb3Igb3ZlcmxheVxuICAgICAgICBpZiAocm91dGVNb2R1bGUuaXNEZXYpIHtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfVxuICAgICAgICAvLyB0aGlzIGlzIHRlY2huaWNhbGx5IGFuIGludmFyaWFudCBhcyBlcnJvciBoYW5kbGluZ1xuICAgICAgICAvLyBzaG91bGQgYmUgZG9uZSBpbnNpZGUgb2YgYXBpLXJlc29sdmVyIG9uRXJyb3JcbiAgICAgICAgc2VuZEVycm9yKHJlcywgNTAwLCAnSW50ZXJuYWwgU2VydmVyIEVycm9yJyk7XG4gICAgfSBmaW5hbGx5e1xuICAgICAgICAvLyBXZSBkb24ndCBhbGxvdyBhbnkgd2FpdFVudGlsIHdvcmsgaW4gcGFnZXMgQVBJIHJvdXRlcyBjdXJyZW50bHlcbiAgICAgICAgLy8gc28gaWYgY2FsbGJhY2sgaXMgcHJlc2VudCByZXR1cm4gd2l0aCByZXNvbHZlZCBwcm9taXNlIHNpbmNlIG5vXG4gICAgICAgIC8vIHBlbmRpbmcgd29ya1xuICAgICAgICBjdHgud2FpdFVudGlsID09IG51bGwgPyB2b2lkIDAgOiBjdHgud2FpdFVudGlsLmNhbGwoY3R4LCBQcm9taXNlLnJlc29sdmUoKSk7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/../../node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fintake%2Fsubmit&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fintake%2Fsubmit.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/intake/_utils.ts":
/*!************************************!*\
  !*** ./pages/api/intake/_utils.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getRequestId: () => (/* binding */ getRequestId),\n/* harmony export */   logRequestError: () => (/* binding */ logRequestError),\n/* harmony export */   logRequestStart: () => (/* binding */ logRequestStart),\n/* harmony export */   parseJsonBody: () => (/* binding */ parseJsonBody),\n/* harmony export */   requireMethod: () => (/* binding */ requireMethod),\n/* harmony export */   sendError: () => (/* binding */ sendError)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n\nconst DEFAULT_BODY_LIMIT_BYTES = 1024 * 1024;\nfunction getRequestId(req) {\n    const header = req.headers['x-request-id'] ?? req.headers['x-correlation-id'];\n    if (Array.isArray(header)) {\n        const value = header.find((entry)=>entry.trim());\n        if (value) return value.trim();\n    }\n    if (typeof header === 'string' && header.trim()) {\n        return header.trim();\n    }\n    return crypto__WEBPACK_IMPORTED_MODULE_0___default().randomUUID();\n}\nfunction logRequestStart(req, requestId) {\n    const path = req.url ? req.url.split('?')[0] : '';\n    console.info(`[intake-api] ${req.method ?? 'UNKNOWN'} ${path} requestId=${requestId}`);\n}\nfunction logRequestError(requestId, status, message, detail) {\n    const suffix = detail ? ` detail=\"${detail}\"` : '';\n    console.error(`[intake-api] requestId=${requestId} status=${status} message=\"${message}\"${suffix}`);\n}\nfunction sendError(res, status, message, requestId, detail) {\n    logRequestError(requestId, status, message, detail);\n    return res.status(status).json({\n        ok: false,\n        error: message,\n        requestId\n    });\n}\nfunction requireMethod(req, res, allowed, requestId) {\n    if (!req.method || !allowed.includes(req.method)) {\n        res.setHeader('Allow', allowed);\n        sendError(res, 405, 'Method not allowed', requestId);\n        return false;\n    }\n    return true;\n}\nfunction parseJsonBody(req, requestId, options = {}) {\n    const limitBytes = options.limitBytes ?? DEFAULT_BODY_LIMIT_BYTES;\n    const body = req.body ?? (options.allowEmpty ? {} : undefined);\n    if (body === undefined) {\n        return {\n            ok: false,\n            status: 400,\n            error: 'Request body required'\n        };\n    }\n    if (typeof body === 'string') {\n        if (Buffer.byteLength(body, 'utf8') > limitBytes) {\n            return {\n                ok: false,\n                status: 413,\n                error: 'Request body too large'\n            };\n        }\n        try {\n            return {\n                ok: true,\n                data: JSON.parse(body)\n            };\n        } catch  {\n            return {\n                ok: false,\n                status: 400,\n                error: 'Invalid JSON body'\n            };\n        }\n    }\n    const size = Buffer.byteLength(JSON.stringify(body), 'utf8');\n    if (size > limitBytes) {\n        return {\n            ok: false,\n            status: 413,\n            error: 'Request body too large'\n        };\n    }\n    return {\n        ok: true,\n        data: body\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WUFBb0I7UUFDOUQ7SUFDRjtJQUVBLE1BQU1vQixPQUFPTCxPQUFPQyxVQUFVLENBQUNFLEtBQUtHLFNBQVMsQ0FBQ1QsT0FBTztJQUNyRCxJQUFJUSxPQUFPVCxZQUFZO1FBQ3JCLE9BQU87WUFBRVAsSUFBSTtZQUFPUixRQUFRO1lBQUtJLE9BQU87UUFBeUI7SUFDbkU7SUFFQSxPQUFPO1FBQUVJLElBQUk7UUFBTWEsTUFBTUw7SUFBVTtBQUNyQyIsInNvdXJjZXMiOlsiL1VzZXJzL2RvbWluaWNyYW5naGlhc2NpL3ZlcmlsZXgtbGFuZGluZy9hcHBzL2ludGFrZS9wYWdlcy9hcGkvaW50YWtlL191dGlscy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcbmltcG9ydCBjcnlwdG8gZnJvbSAnY3J5cHRvJztcblxuY29uc3QgREVGQVVMVF9CT0RZX0xJTUlUX0JZVEVTID0gMTAyNCAqIDEwMjQ7XG5cbnR5cGUgSnNvblBhcnNlT3B0aW9ucyA9IHtcbiAgYWxsb3dFbXB0eT86IGJvb2xlYW47XG4gIGxpbWl0Qnl0ZXM/OiBudW1iZXI7XG59O1xuXG50eXBlIEpzb25QYXJzZVJlc3VsdDxUPiA9XG4gIHwgeyBvazogdHJ1ZTsgZGF0YTogVCB9XG4gIHwgeyBvazogZmFsc2U7IHN0YXR1czogbnVtYmVyOyBlcnJvcjogc3RyaW5nIH07XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZXF1ZXN0SWQocmVxOiBOZXh0QXBpUmVxdWVzdCk6IHN0cmluZyB7XG4gIGNvbnN0IGhlYWRlciA9IHJlcS5oZWFkZXJzWyd4LXJlcXVlc3QtaWQnXSA/PyByZXEuaGVhZGVyc1sneC1jb3JyZWxhdGlvbi1pZCddO1xuICBpZiAoQXJyYXkuaXNBcnJheShoZWFkZXIpKSB7XG4gICAgY29uc3QgdmFsdWUgPSBoZWFkZXIuZmluZCgoZW50cnkpID0+IGVudHJ5LnRyaW0oKSk7XG4gICAgaWYgKHZhbHVlKSByZXR1cm4gdmFsdWUudHJpbSgpO1xuICB9XG4gIGlmICh0eXBlb2YgaGVhZGVyID09PSAnc3RyaW5nJyAmJiBoZWFkZXIudHJpbSgpKSB7XG4gICAgcmV0dXJuIGhlYWRlci50cmltKCk7XG4gIH1cbiAgcmV0dXJuIGNyeXB0by5yYW5kb21VVUlEKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2dSZXF1ZXN0U3RhcnQocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVxdWVzdElkOiBzdHJpbmcpIHtcbiAgY29uc3QgcGF0aCA9IHJlcS51cmwgPyByZXEudXJsLnNwbGl0KCc/JylbMF0gOiAnJztcbiAgY29uc29sZS5pbmZvKGBbaW50YWtlLWFwaV0gJHtyZXEubWV0aG9kID8/ICdVTktOT1dOJ30gJHtwYXRofSByZXF1ZXN0SWQ9JHtyZXF1ZXN0SWR9YCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2dSZXF1ZXN0RXJyb3IoXG4gIHJlcXVlc3RJZDogc3RyaW5nLFxuICBzdGF0dXM6IG51bWJlcixcbiAgbWVzc2FnZTogc3RyaW5nLFxuICBkZXRhaWw/OiBzdHJpbmcsXG4pIHtcbiAgY29uc3Qgc3VmZml4ID0gZGV0YWlsID8gYCBkZXRhaWw9XCIke2RldGFpbH1cImAgOiAnJztcbiAgY29uc29sZS5lcnJvcihgW2ludGFrZS1hcGldIHJlcXVlc3RJZD0ke3JlcXVlc3RJZH0gc3RhdHVzPSR7c3RhdHVzfSBtZXNzYWdlPVwiJHttZXNzYWdlfVwiJHtzdWZmaXh9YCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZW5kRXJyb3IoXG4gIHJlczogTmV4dEFwaVJlc3BvbnNlLFxuICBzdGF0dXM6IG51bWJlcixcbiAgbWVzc2FnZTogc3RyaW5nLFxuICByZXF1ZXN0SWQ6IHN0cmluZyxcbiAgZGV0YWlsPzogc3RyaW5nLFxuKSB7XG4gIGxvZ1JlcXVlc3RFcnJvcihyZXF1ZXN0SWQsIHN0YXR1cywgbWVzc2FnZSwgZGV0YWlsKTtcbiAgcmV0dXJuIHJlcy5zdGF0dXMoc3RhdHVzKS5qc29uKHsgb2s6IGZhbHNlLCBlcnJvcjogbWVzc2FnZSwgcmVxdWVzdElkIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVxdWlyZU1ldGhvZChcbiAgcmVxOiBOZXh0QXBpUmVxdWVzdCxcbiAgcmVzOiBOZXh0QXBpUmVzcG9uc2UsXG4gIGFsbG93ZWQ6IHN0cmluZ1tdLFxuICByZXF1ZXN0SWQ6IHN0cmluZyxcbikge1xuICBpZiAoIXJlcS5tZXRob2QgfHwgIWFsbG93ZWQuaW5jbHVkZXMocmVxLm1ldGhvZCkpIHtcbiAgICByZXMuc2V0SGVhZGVyKCdBbGxvdycsIGFsbG93ZWQpO1xuICAgIHNlbmRFcnJvcihyZXMsIDQwNSwgJ01ldGhvZCBub3QgYWxsb3dlZCcsIHJlcXVlc3RJZCk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VKc29uQm9keTxUPihcbiAgcmVxOiBOZXh0QXBpUmVxdWVzdCxcbiAgcmVxdWVzdElkOiBzdHJpbmcsXG4gIG9wdGlvbnM6IEpzb25QYXJzZU9wdGlvbnMgPSB7fSxcbik6IEpzb25QYXJzZVJlc3VsdDxUPiB7XG4gIGNvbnN0IGxpbWl0Qnl0ZXMgPSBvcHRpb25zLmxpbWl0Qnl0ZXMgPz8gREVGQVVMVF9CT0RZX0xJTUlUX0JZVEVTO1xuICBjb25zdCBib2R5ID0gcmVxLmJvZHkgPz8gKG9wdGlvbnMuYWxsb3dFbXB0eSA/IHt9IDogdW5kZWZpbmVkKTtcblxuICBpZiAoYm9keSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHsgb2s6IGZhbHNlLCBzdGF0dXM6IDQwMCwgZXJyb3I6ICdSZXF1ZXN0IGJvZHkgcmVxdWlyZWQnIH07XG4gIH1cblxuICBpZiAodHlwZW9mIGJvZHkgPT09ICdzdHJpbmcnKSB7XG4gICAgaWYgKEJ1ZmZlci5ieXRlTGVuZ3RoKGJvZHksICd1dGY4JykgPiBsaW1pdEJ5dGVzKSB7XG4gICAgICByZXR1cm4geyBvazogZmFsc2UsIHN0YXR1czogNDEzLCBlcnJvcjogJ1JlcXVlc3QgYm9keSB0b28gbGFyZ2UnIH07XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICByZXR1cm4geyBvazogdHJ1ZSwgZGF0YTogSlNPTi5wYXJzZShib2R5KSBhcyBUIH07XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4geyBvazogZmFsc2UsIHN0YXR1czogNDAwLCBlcnJvcjogJ0ludmFsaWQgSlNPTiBib2R5JyB9O1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHNpemUgPSBCdWZmZXIuYnl0ZUxlbmd0aChKU09OLnN0cmluZ2lmeShib2R5KSwgJ3V0ZjgnKTtcbiAgaWYgKHNpemUgPiBsaW1pdEJ5dGVzKSB7XG4gICAgcmV0dXJuIHsgb2s6IGZhbHNlLCBzdGF0dXM6IDQxMywgZXJyb3I6ICdSZXF1ZXN0IGJvZHkgdG9vIGxhcmdlJyB9O1xuICB9XG5cbiAgcmV0dXJuIHsgb2s6IHRydWUsIGRhdGE6IGJvZHkgYXMgVCB9O1xufVxuIl0sIm5hbWVzIjpbImNyeXB0byIsIkRFRkFVTFRfQk9EWV9MSU1JVF9CWVRFUyIsImdldFJlcXVlc3RJZCIsInJlcSIsImhlYWRlciIsImhlYWRlcnMiLCJBcnJheSIsImlzQXJyYXkiLCJ2YWx1ZSIsImZpbmQiLCJlbnRyeSIsInRyaW0iLCJyYW5kb21VVUlEIiwibG9nUmVxdWVzdFN0YXJ0IiwicmVxdWVzdElkIiwicGF0aCIsInVybCIsInNwbGl0IiwiY29uc29sZSIsImluZm8iLCJtZXRob2QiLCJsb2dSZXF1ZXN0RXJyb3IiLCJzdGF0dXMiLCJtZXNzYWdlIiwiZGV0YWlsIiwic3VmZml4IiwiZXJyb3IiLCJzZW5kRXJyb3IiLCJyZXMiLCJqc29uIiwib2siLCJyZXF1aXJlTWV0aG9kIiwiYWxsb3dlZCIsImluY2x1ZGVzIiwic2V0SGVhZGVyIiwicGFyc2VKc29uQm9keSIsIm9wdGlvbnMiLCJsaW1pdEJ5dGVzIiwiYm9keSIsImFsbG93RW1wdHkiLCJ1bmRlZmluZWQiLCJCdWZmZXIiLCJieXRlTGVuZ3RoIiwiZGF0YSIsIkpTT04iLCJwYXJzZSIsInNpemUiLCJzdHJpbmdpZnkiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/intake/_utils.ts\n");

/***/ }),

/***/ "(api-node)/./pages/api/intake/submit.ts":
/*!************************************!*\
  !*** ./pages/api/intake/submit.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_server_supabaseAdmin__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../lib/server/supabaseAdmin */ \"(api-node)/../../lib/server/supabaseAdmin.ts\");\n/* harmony import */ var _lib_server_intakeToken__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../lib/server/intakeToken */ \"(api-node)/../../lib/server/intakeToken.ts\");\n/* harmony import */ var _lib_intake_schema_gaDivorceCustodyV1__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../lib/intake/schema/gaDivorceCustodyV1 */ \"(api-node)/../../lib/intake/schema/gaDivorceCustodyV1.ts\");\n/* harmony import */ var _lib_intake_normalizePayload__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../lib/intake/normalizePayload */ \"(api-node)/../../lib/intake/normalizePayload.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./_utils */ \"(api-node)/./pages/api/intake/_utils.ts\");\n\n\n\n\n\nconst allowedFieldKeys = new Set(_lib_intake_schema_gaDivorceCustodyV1__WEBPACK_IMPORTED_MODULE_2__.GA_DIVORCE_CUSTODY_V1.sections.flatMap((section)=>section.fields.filter((field)=>!field.isSystem).map((field)=>field.key)));\nfunction extractToken(req, body) {\n    const authHeader = req.headers.authorization;\n    if (authHeader?.startsWith('Bearer ')) {\n        return authHeader.slice('Bearer '.length).trim();\n    }\n    const headerToken = req.headers['x-intake-token'];\n    if (typeof headerToken === 'string' && headerToken.trim()) {\n        return headerToken.trim();\n    }\n    const queryToken = req.query.token;\n    if (typeof queryToken === 'string' && queryToken.trim()) {\n        return queryToken.trim();\n    }\n    const bodyToken = body?.token;\n    if (typeof bodyToken === 'string' && bodyToken.trim()) {\n        return bodyToken.trim();\n    }\n    return '';\n}\nfunction isPlainObject(value) {\n    return Boolean(value) && typeof value === 'object' && !Array.isArray(value);\n}\nfunction sanitizePatch(input) {\n    const unknownKeys = [];\n    const sanitized = {};\n    for (const [key, value] of Object.entries(input)){\n        if (!allowedFieldKeys.has(key)) {\n            unknownKeys.push(key);\n            continue;\n        }\n        if (value !== undefined) {\n            sanitized[key] = value;\n        }\n    }\n    return {\n        sanitized,\n        unknownKeys\n    };\n}\nfunction toStringOrNull(value) {\n    if (typeof value !== 'string') return null;\n    const trimmed = value.trim();\n    return trimmed.length > 0 ? trimmed : null;\n}\nfunction buildClientDisplayName(payload) {\n    const first = toStringOrNull(payload.client_first_name);\n    const last = toStringOrNull(payload.client_last_name);\n    if (!first && !last) return null;\n    return [\n        first,\n        last\n    ].filter(Boolean).join(' ').trim() || null;\n}\nasync function handler(req, res) {\n    const requestId = (0,_utils__WEBPACK_IMPORTED_MODULE_4__.getRequestId)(req);\n    (0,_utils__WEBPACK_IMPORTED_MODULE_4__.logRequestStart)(req, requestId);\n    if (!(0,_utils__WEBPACK_IMPORTED_MODULE_4__.requireMethod)(req, res, [\n        'POST'\n    ], requestId)) {\n        return;\n    }\n    const bodyResult = (0,_utils__WEBPACK_IMPORTED_MODULE_4__.parseJsonBody)(req, requestId);\n    if (!bodyResult.ok) {\n        (0,_utils__WEBPACK_IMPORTED_MODULE_4__.sendError)(res, bodyResult.status, bodyResult.error, requestId);\n        return;\n    }\n    const token = extractToken(req, bodyResult.data);\n    if (!token) {\n        (0,_utils__WEBPACK_IMPORTED_MODULE_4__.sendError)(res, 401, 'Missing intake token', requestId);\n        return;\n    }\n    const tokenResult = (0,_lib_server_intakeToken__WEBPACK_IMPORTED_MODULE_1__.verifyIntakeToken)(token);\n    if (!tokenResult.ok) {\n        (0,_utils__WEBPACK_IMPORTED_MODULE_4__.sendError)(res, tokenResult.status, tokenResult.error, requestId);\n        return;\n    }\n    const body = bodyResult.data ?? {};\n    const intakeId = typeof body.intakeId === 'string' ? body.intakeId : '';\n    if (!intakeId) {\n        (0,_utils__WEBPACK_IMPORTED_MODULE_4__.sendError)(res, 400, 'intakeId is required', requestId);\n        return;\n    }\n    if (intakeId !== tokenResult.payload.intake_id) {\n        (0,_utils__WEBPACK_IMPORTED_MODULE_4__.sendError)(res, 403, 'Intake token does not match intake', requestId);\n        return;\n    }\n    const patchInput = body.patch ?? {};\n    if (!isPlainObject(patchInput)) {\n        (0,_utils__WEBPACK_IMPORTED_MODULE_4__.sendError)(res, 400, 'patch must be an object', requestId);\n        return;\n    }\n    const { sanitized, unknownKeys } = sanitizePatch(patchInput);\n    if (unknownKeys.length > 0) {\n        (0,_utils__WEBPACK_IMPORTED_MODULE_4__.sendError)(res, 400, `Unknown intake fields: ${unknownKeys.join(', ')}`, requestId);\n        return;\n    }\n    const { data: intake, error: intakeError } = await _lib_server_supabaseAdmin__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from('intakes').select('id, firm_id, status, submitted_at, raw_payload').eq('id', intakeId).eq('firm_id', tokenResult.payload.firm_id).maybeSingle();\n    if (intakeError) {\n        (0,_utils__WEBPACK_IMPORTED_MODULE_4__.sendError)(res, 500, 'Unable to load intake', requestId);\n        return;\n    }\n    if (!intake) {\n        (0,_utils__WEBPACK_IMPORTED_MODULE_4__.sendError)(res, 404, 'Intake not found', requestId);\n        return;\n    }\n    if (intake.submitted_at || intake.status === 'submitted') {\n        return res.status(200).json({\n            ok: true,\n            locked: true,\n            submitted_at: intake.submitted_at\n        });\n    }\n    const updateRow = {\n        status: 'submitted',\n        submitted_at: new Date().toISOString()\n    };\n    if (Object.keys(sanitized).length > 0) {\n        const existingPayload = isPlainObject(intake.raw_payload) ? intake.raw_payload : {};\n        const nextPayload = (0,_lib_intake_normalizePayload__WEBPACK_IMPORTED_MODULE_3__.normalizePayloadToDocxV1)({\n            ...existingPayload,\n            ...sanitized\n        });\n        updateRow.raw_payload = nextPayload;\n        if (sanitized.intake_channel !== undefined) {\n            updateRow.intake_channel = toStringOrNull(sanitized.intake_channel);\n        }\n        if (sanitized.matter_type !== undefined) {\n            updateRow.matter_type = toStringOrNull(sanitized.matter_type);\n        }\n        if (sanitized.urgency_level !== undefined) {\n            updateRow.urgency_level = toStringOrNull(sanitized.urgency_level);\n        }\n        if (sanitized.language_preference !== undefined) {\n            updateRow.language_preference = toStringOrNull(sanitized.language_preference);\n        }\n        const displayName = buildClientDisplayName(nextPayload);\n        if (displayName) {\n            updateRow.client_display_name = displayName;\n        }\n    }\n    const { data: updated, error: updateError } = await _lib_server_supabaseAdmin__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from('intakes').update(updateRow).eq('id', intakeId).eq('firm_id', tokenResult.payload.firm_id).is('submitted_at', null).select('id, submitted_at').maybeSingle();\n    if (updateError) {\n        if (updateError.message.includes('INTAKE_IMMUTABLE')) {\n            return res.status(409).json({\n                ok: false,\n                locked: true,\n                requestId\n            });\n        }\n        (0,_utils__WEBPACK_IMPORTED_MODULE_4__.sendError)(res, 500, 'Unable to submit intake', requestId);\n        return;\n    }\n    if (!updated) {\n        return res.status(409).json({\n            ok: false,\n            locked: true,\n            requestId\n        });\n    }\n    return res.status(200).json({\n        ok: true,\n        locked: true,\n        submitted_at: updated.submitted_at\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3BhZ2VzL2FwaS9pbnRha2Uvc3VibWl0LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUN3RTtBQUNFO0FBQ2tCO0FBQ047QUFPcEU7QUFFbEIsTUFBTVMsbUJBQW1CLElBQUlDLElBQzNCUix3RkFBcUJBLENBQUNTLFFBQVEsQ0FBQ0MsT0FBTyxDQUFDLENBQUNDLFVBQ3RDQSxRQUFRQyxNQUFNLENBQUNDLE1BQU0sQ0FBQyxDQUFDQyxRQUFVLENBQUNBLE1BQU1DLFFBQVEsRUFBRUMsR0FBRyxDQUFDLENBQUNGLFFBQVVBLE1BQU1HLEdBQUc7QUFJOUUsU0FBU0MsYUFBYUMsR0FBbUIsRUFBRUMsSUFBZ0M7SUFDekUsTUFBTUMsYUFBYUYsSUFBSUcsT0FBTyxDQUFDQyxhQUFhO0lBQzVDLElBQUlGLFlBQVlHLFdBQVcsWUFBWTtRQUNyQyxPQUFPSCxXQUFXSSxLQUFLLENBQUMsVUFBVUMsTUFBTSxFQUFFQyxJQUFJO0lBQ2hEO0lBRUEsTUFBTUMsY0FBY1QsSUFBSUcsT0FBTyxDQUFDLGlCQUFpQjtJQUNqRCxJQUFJLE9BQU9NLGdCQUFnQixZQUFZQSxZQUFZRCxJQUFJLElBQUk7UUFDekQsT0FBT0MsWUFBWUQsSUFBSTtJQUN6QjtJQUVBLE1BQU1FLGFBQWFWLElBQUlXLEtBQUssQ0FBQ0MsS0FBSztJQUNsQyxJQUFJLE9BQU9GLGVBQWUsWUFBWUEsV0FBV0YsSUFBSSxJQUFJO1FBQ3ZELE9BQU9FLFdBQVdGLElBQUk7SUFDeEI7SUFFQSxNQUFNSyxZQUFZWixNQUFNVztJQUN4QixJQUFJLE9BQU9DLGNBQWMsWUFBWUEsVUFBVUwsSUFBSSxJQUFJO1FBQ3JELE9BQU9LLFVBQVVMLElBQUk7SUFDdkI7SUFFQSxPQUFPO0FBQ1Q7QUFFQSxTQUFTTSxjQUFjQyxLQUFjO0lBQ25DLE9BQU9DLFFBQVFELFVBQVUsT0FBT0EsVUFBVSxZQUFZLENBQUNFLE1BQU1DLE9BQU8sQ0FBQ0g7QUFDdkU7QUFFQSxTQUFTSSxjQUFjQyxLQUE4QjtJQUNu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QztBQUMzRiIsInNvdXJjZXMiOlsiL1VzZXJzL2RvbWluaWNyYW5naGlhc2NpL3ZlcmlsZXgtbGFuZGluZy9hcHBzL2ludGFrZS9wYWdlcy9hcGkvaW50YWtlL3N1Ym1pdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcbmltcG9ydCB7IHN1cGFiYXNlQWRtaW4gfSBmcm9tICcuLi8uLi8uLi8uLi8uLi9saWIvc2VydmVyL3N1cGFiYXNlQWRtaW4nO1xuaW1wb3J0IHsgdmVyaWZ5SW50YWtlVG9rZW4gfSBmcm9tICcuLi8uLi8uLi8uLi8uLi9saWIvc2VydmVyL2ludGFrZVRva2VuJztcbmltcG9ydCB7IEdBX0RJVk9SQ0VfQ1VTVE9EWV9WMSB9IGZyb20gJy4uLy4uLy4uLy4uLy4uL2xpYi9pbnRha2Uvc2NoZW1hL2dhRGl2b3JjZUN1c3RvZHlWMSc7XG5pbXBvcnQgeyBub3JtYWxpemVQYXlsb2FkVG9Eb2N4VjEgfSBmcm9tICcuLi8uLi8uLi8uLi8uLi9saWIvaW50YWtlL25vcm1hbGl6ZVBheWxvYWQnO1xuaW1wb3J0IHtcbiAgZ2V0UmVxdWVzdElkLFxuICBsb2dSZXF1ZXN0U3RhcnQsXG4gIHBhcnNlSnNvbkJvZHksXG4gIHJlcXVpcmVNZXRob2QsXG4gIHNlbmRFcnJvcixcbn0gZnJvbSAnLi9fdXRpbHMnO1xuXG5jb25zdCBhbGxvd2VkRmllbGRLZXlzID0gbmV3IFNldChcbiAgR0FfRElWT1JDRV9DVVNUT0RZX1YxLnNlY3Rpb25zLmZsYXRNYXAoKHNlY3Rpb24pID0+XG4gICAgc2VjdGlvbi5maWVsZHMuZmlsdGVyKChmaWVsZCkgPT4gIWZpZWxkLmlzU3lzdGVtKS5tYXAoKGZpZWxkKSA9PiBmaWVsZC5rZXkpLFxuICApLFxuKTtcblxuZnVuY3Rpb24gZXh0cmFjdFRva2VuKHJlcTogTmV4dEFwaVJlcXVlc3QsIGJvZHk/OiB7IHRva2VuPzogc3RyaW5nIH0gfCBudWxsKTogc3RyaW5nIHtcbiAgY29uc3QgYXV0aEhlYWRlciA9IHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb247XG4gIGlmIChhdXRoSGVhZGVyPy5zdGFydHNXaXRoKCdCZWFyZXIgJykpIHtcbiAgICByZXR1cm4gYXV0aEhlYWRlci5zbGljZSgnQmVhcmVyICcubGVuZ3RoKS50cmltKCk7XG4gIH1cblxuICBjb25zdCBoZWFkZXJUb2tlbiA9IHJlcS5oZWFkZXJzWyd4LWludGFrZS10b2tlbiddO1xuICBpZiAodHlwZW9mIGhlYWRlclRva2VuID09PSAnc3RyaW5nJyAmJiBoZWFkZXJUb2tlbi50cmltKCkpIHtcbiAgICByZXR1cm4gaGVhZGVyVG9rZW4udHJpbSgpO1xuICB9XG5cbiAgY29uc3QgcXVlcnlUb2tlbiA9IHJlcS5xdWVyeS50b2tlbjtcbiAgaWYgKHR5cGVvZiBxdWVyeVRva2VuID09PSAnc3RyaW5nJyAmJiBxdWVyeVRva2VuLnRyaW0oKSkge1xuICAgIHJldHVybiBxdWVyeVRva2VuLnRyaW0oKTtcbiAgfVxuXG4gIGNvbnN0IGJvZHlUb2tlbiA9IGJvZHk/LnRva2VuO1xuICBpZiAodHlwZW9mIGJvZHlUb2tlbiA9PT0gJ3N0cmluZycgJiYgYm9keVRva2VuLnRyaW0oKSkge1xuICAgIHJldHVybiBib2R5VG9rZW4udHJpbSgpO1xuICB9XG5cbiAgcmV0dXJuICcnO1xufVxuXG5mdW5jdGlvbiBpc1BsYWluT2JqZWN0KHZhbHVlOiB1bmtub3duKTogdmFsdWUgaXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4ge1xuICByZXR1cm4gQm9vbGVhbih2YWx1ZSkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiAhQXJyYXkuaXNBcnJheSh2YWx1ZSk7XG59XG5cbmZ1bmN0aW9uIHNhbml0aXplUGF0Y2goaW5wdXQ6IFJlY29yZDxzdHJpbmcsIHVua25vd24+KSB7XG4gIGNvbnN0IHVua25vd25LZXlzOiBzdHJpbmdbXSA9IFtdO1xuICBjb25zdCBzYW5pdGl6ZWQ6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge307XG5cbiAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoaW5wdXQpKSB7XG4gICAgaWYgKCFhbGxvd2VkRmllbGRLZXlzLmhhcyhrZXkpKSB7XG4gICAgICB1bmtub3duS2V5cy5wdXNoKGtleSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHNhbml0aXplZFtrZXldID0gdmFsdWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHsgc2FuaXRpemVkLCB1bmtub3duS2V5cyB9O1xufVxuXG5mdW5jdGlvbiB0b1N0cmluZ09yTnVsbCh2YWx1ZTogdW5rbm93bik6IHN0cmluZyB8IG51bGwge1xuICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykgcmV0dXJuIG51bGw7XG4gIGNvbnN0IHRyaW1tZWQgPSB2YWx1ZS50cmltKCk7XG4gIHJldHVybiB0cmltbWVkLmxlbmd0aCA+IDAgPyB0cmltbWVkIDogbnVsbDtcbn1cblxuZnVuY3Rpb24gYnVpbGRDbGllbnREaXNwbGF5TmFtZShwYXlsb2FkOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPik6IHN0cmluZyB8IG51bGwge1xuICBjb25zdCBmaXJzdCA9IHRvU3RyaW5nT3JOdWxsKHBheWxvYWQuY2xpZW50X2ZpcnN0X25hbWUpO1xuICBjb25zdCBsYXN0ID0gdG9TdHJpbmdPck51bGwocGF5bG9hZC5jbGllbnRfbGFzdF9uYW1lKTtcbiAgaWYgKCFmaXJzdCAmJiAhbGFzdCkgcmV0dXJuIG51bGw7XG4gIHJldHVybiBbZmlyc3QsIGxhc3RdLmZpbHRlcihCb29sZWFuKS5qb2luKCcgJykudHJpbSgpIHx8IG51bGw7XG59XG5cbnR5cGUgU3VibWl0Qm9keSA9IHtcbiAgaW50YWtlSWQ/OiBzdHJpbmc7XG4gIHBhdGNoPzogUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG59O1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XG4gIGNvbnN0IHJlcXVlc3RJZCA9IGdldFJlcXVlc3RJZChyZXEpO1xuICBsb2dSZXF1ZXN0U3RhcnQocmVxLCByZXF1ZXN0SWQpO1xuXG4gIGlmICghcmVxdWlyZU1ldGhvZChyZXEsIHJlcywgWydQT1NUJ10sIHJlcXVlc3RJZCkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBib2R5UmVzdWx0ID0gcGFyc2VKc29uQm9keTxTdWJtaXRCb2R5PihyZXEsIHJlcXVlc3RJZCk7XG4gIGlmICghYm9keVJlc3VsdC5vaykge1xuICAgIHNlbmRFcnJvcihyZXMsIGJvZHlSZXN1bHQuc3RhdHVzLCBib2R5UmVzdWx0LmVycm9yLCByZXF1ZXN0SWQpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHRva2VuID0gZXh0cmFjdFRva2VuKHJlcSwgYm9keVJlc3VsdC5kYXRhKTtcbiAgaWYgKCF0b2tlbikge1xuICAgIHNlbmRFcnJvcihyZXMsIDQwMSwgJ01pc3NpbmcgaW50YWtlIHRva2VuJywgcmVxdWVzdElkKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCB0b2tlblJlc3VsdCA9IHZlcmlmeUludGFrZVRva2VuKHRva2VuKTtcbiAgaWYgKCF0b2tlblJlc3VsdC5vaykge1xuICAgIHNlbmRFcnJvcihyZXMsIHRva2VuUmVzdWx0LnN0YXR1cywgdG9rZW5SZXN1bHQuZXJyb3IsIHJlcXVlc3RJZCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgYm9keSA9IGJvZHlSZXN1bHQuZGF0YSA/PyB7fTtcbiAgY29uc3QgaW50YWtlSWQgPSB0eXBlb2YgYm9keS5pbnRha2VJZCA9PT0gJ3N0cmluZycgPyBib2R5LmludGFrZUlkIDogJyc7XG4gIGlmICghaW50YWtlSWQpIHtcbiAgICBzZW5kRXJyb3IocmVzLCA0MDAsICdpbnRha2VJZCBpcyByZXF1aXJlZCcsIHJlcXVlc3RJZCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChpbnRha2VJZCAhPT0gdG9rZW5SZXN1bHQucGF5bG9hZC5pbnRha2VfaWQpIHtcbiAgICBzZW5kRXJyb3IocmVzLCA0MDMsICdJbnRha2UgdG9rZW4gZG9lcyBub3QgbWF0Y2ggaW50YWtlJywgcmVxdWVzdElkKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBwYXRjaElucHV0ID0gYm9keS5wYXRjaCA/PyB7fTtcbiAgaWYgKCFpc1BsYWluT2JqZWN0KHBhdGNoSW5wdXQpKSB7XG4gICAgc2VuZEVycm9yKHJlcywgNDAwLCAncGF0Y2ggbXVzdCBiZSBhbiBvYmplY3QnLCByZXF1ZXN0SWQpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHsgc2FuaXRpemVkLCB1bmtub3duS2V5cyB9ID0gc2FuaXRpemVQYXRjaChwYXRjaElucHV0KTtcbiAgaWYgKHVua25vd25LZXlzLmxlbmd0aCA+IDApIHtcbiAgICBzZW5kRXJyb3IocmVzLCA0MDAsIGBVbmtub3duIGludGFrZSBmaWVsZHM6ICR7dW5rbm93bktleXMuam9pbignLCAnKX1gLCByZXF1ZXN0SWQpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHsgZGF0YTogaW50YWtlLCBlcnJvcjogaW50YWtlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAuZnJvbSgnaW50YWtlcycpXG4gICAgLnNlbGVjdCgnaWQsIGZpcm1faWQsIHN0YXR1cywgc3VibWl0dGVkX2F0LCByYXdfcGF5bG9hZCcpXG4gICAgLmVxKCdpZCcsIGludGFrZUlkKVxuICAgIC5lcSgnZmlybV9pZCcsIHRva2VuUmVzdWx0LnBheWxvYWQuZmlybV9pZClcbiAgICAubWF5YmVTaW5nbGUoKTtcblxuICBpZiAoaW50YWtlRXJyb3IpIHtcbiAgICBzZW5kRXJyb3IocmVzLCA1MDAsICdVbmFibGUgdG8gbG9hZCBpbnRha2UnLCByZXF1ZXN0SWQpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmICghaW50YWtlKSB7XG4gICAgc2VuZEVycm9yKHJlcywgNDA0LCAnSW50YWtlIG5vdCBmb3VuZCcsIHJlcXVlc3RJZCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGludGFrZS5zdWJtaXR0ZWRfYXQgfHwgaW50YWtlLnN0YXR1cyA9PT0gJ3N1Ym1pdHRlZCcpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBvazogdHJ1ZSwgbG9ja2VkOiB0cnVlLCBzdWJtaXR0ZWRfYXQ6IGludGFrZS5zdWJtaXR0ZWRfYXQgfSk7XG4gIH1cblxuICBjb25zdCB1cGRhdGVSb3c6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge1xuICAgIHN0YXR1czogJ3N1Ym1pdHRlZCcsXG4gICAgc3VibWl0dGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gIH07XG5cbiAgaWYgKE9iamVjdC5rZXlzKHNhbml0aXplZCkubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IGV4aXN0aW5nUGF5bG9hZCA9IGlzUGxhaW5PYmplY3QoaW50YWtlLnJhd19wYXlsb2FkKSA/IGludGFrZS5yYXdfcGF5bG9hZCA6IHt9O1xuICAgIGNvbnN0IG5leHRQYXlsb2FkID0gbm9ybWFsaXplUGF5bG9hZFRvRG9jeFYxKHsgLi4uZXhpc3RpbmdQYXlsb2FkLCAuLi5zYW5pdGl6ZWQgfSk7XG4gICAgdXBkYXRlUm93LnJhd19wYXlsb2FkID0gbmV4dFBheWxvYWQ7XG5cbiAgICBpZiAoc2FuaXRpemVkLmludGFrZV9jaGFubmVsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHVwZGF0ZVJvdy5pbnRha2VfY2hhbm5lbCA9IHRvU3RyaW5nT3JOdWxsKHNhbml0aXplZC5pbnRha2VfY2hhbm5lbCk7XG4gICAgfVxuICAgIGlmIChzYW5pdGl6ZWQubWF0dGVyX3R5cGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdXBkYXRlUm93Lm1hdHRlcl90eXBlID0gdG9TdHJpbmdPck51bGwoc2FuaXRpemVkLm1hdHRlcl90eXBlKTtcbiAgICB9XG4gICAgaWYgKHNhbml0aXplZC51cmdlbmN5X2xldmVsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHVwZGF0ZVJvdy51cmdlbmN5X2xldmVsID0gdG9TdHJpbmdPck51bGwoc2FuaXRpemVkLnVyZ2VuY3lfbGV2ZWwpO1xuICAgIH1cbiAgICBpZiAoc2FuaXRpemVkLmxhbmd1YWdlX3ByZWZlcmVuY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdXBkYXRlUm93Lmxhbmd1YWdlX3ByZWZlcmVuY2UgPSB0b1N0cmluZ09yTnVsbChzYW5pdGl6ZWQubGFuZ3VhZ2VfcHJlZmVyZW5jZSk7XG4gICAgfVxuXG4gICAgY29uc3QgZGlzcGxheU5hbWUgPSBidWlsZENsaWVudERpc3BsYXlOYW1lKG5leHRQYXlsb2FkKTtcbiAgICBpZiAoZGlzcGxheU5hbWUpIHtcbiAgICAgIHVwZGF0ZVJvdy5jbGllbnRfZGlzcGxheV9uYW1lID0gZGlzcGxheU5hbWU7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgeyBkYXRhOiB1cGRhdGVkLCBlcnJvcjogdXBkYXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAuZnJvbSgnaW50YWtlcycpXG4gICAgLnVwZGF0ZSh1cGRhdGVSb3cpXG4gICAgLmVxKCdpZCcsIGludGFrZUlkKVxuICAgIC5lcSgnZmlybV9pZCcsIHRva2VuUmVzdWx0LnBheWxvYWQuZmlybV9pZClcbiAgICAuaXMoJ3N1Ym1pdHRlZF9hdCcsIG51bGwpXG4gICAgLnNlbGVjdCgnaWQsIHN1Ym1pdHRlZF9hdCcpXG4gICAgLm1heWJlU2luZ2xlKCk7XG5cbiAgaWYgKHVwZGF0ZUVycm9yKSB7XG4gICAgaWYgKHVwZGF0ZUVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ0lOVEFLRV9JTU1VVEFCTEUnKSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA5KS5qc29uKHsgb2s6IGZhbHNlLCBsb2NrZWQ6IHRydWUsIHJlcXVlc3RJZCB9KTtcbiAgICB9XG4gICAgc2VuZEVycm9yKHJlcywgNTAwLCAnVW5hYmxlIHRvIHN1Ym1pdCBpbnRha2UnLCByZXF1ZXN0SWQpO1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoIXVwZGF0ZWQpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDkpLmpzb24oeyBvazogZmFsc2UsIGxvY2tlZDogdHJ1ZSwgcmVxdWVzdElkIH0pO1xuICB9XG5cbiAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgb2s6IHRydWUsIGxvY2tlZDogdHJ1ZSwgc3VibWl0dGVkX2F0OiB1cGRhdGVkLnN1Ym1pdHRlZF9hdCB9KTtcbn1cbiJdLCJuYW1lcyI6WyJzdXBhYmFzZUFkbWluIiwidmVyaWZ5SW50YWtlVG9rZW4iLCJHQV9ESVZPUkNFX0NVU1RPRFlfVjEiLCJub3JtYWxpemVQYXlsb2FkVG9Eb2N4VjEiLCJnZXRSZXF1ZXN0SWQiLCJsb2dSZXF1ZXN0U3RhcnQiLCJwYXJzZUpzb25Cb2R5IiwicmVxdWlyZU1ldGhvZCIsInNlbmRFcnJvciIsImFsbG93ZWRGaWVsZEtleXMiLCJTZXQiLCJzZWN0aW9ucyIsImZsYXRNYXAiLCJzZWN0aW9uIiwiZmllbGRzIiwiZmlsdGVyIiwiZmllbGQiLCJpc1N5c3RlbSIsIm1hcCIsImtleSIsImV4dHJhY3RUb2tlbiIsInJlcSIsImJvZHkiLCJhdXRoSGVhZGVyIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJzdGFydHNXaXRoIiwic2xpY2UiLCJsZW5ndGgiLCJ0cmltIiwiaGVhZGVyVG9rZW4iLCJxdWVyeVRva2VuIiwicXVlcnkiLCJ0b2tlbiIsImJvZHlUb2tlbiIsImlzUGxhaW5PYmplY3QiLCJ2YWx1ZSIsIkJvb2xlYW4iLCJBcnJheSIsImlzQXJyYXkiLCJzYW5pdGl6ZVBhdGNoIiwiaW5wdXQiLCJ1bmtub3duS2V5cyIsInNhbml0aXplZCIsIk9iamVjdCIsImVudHJpZXMiLCJoYXMiLCJwdXNoIiwidW5kZWZpbmVkIiwidG9TdHJpbmdPck51bGwiLCJ0cmltbWVkIiwiYnVpbGRDbGllbnREaXNwbGF5TmFtZSIsInBheWxvYWQiLCJmaXJzdCIsImNsaWVudF9maXJzdF9uYW1lIiwibGFzdCIsImNsaWVudF9sYXN0X25hbWUiLCJqb2luIiwiaGFuZGxlciIsInJlcyIsInJlcXVlc3RJZCIsImJvZHlSZXN1bHQiLCJvayIsInN0YXR1cyIsImVycm9yIiwiZGF0YSIsInRva2VuUmVzdWx0IiwiaW50YWtlSWQiLCJpbnRha2VfaWQiLCJwYXRjaElucHV0IiwicGF0Y2giLCJpbnRha2UiLCJpbnRha2VFcnJvciIsImZyb20iLCJzZWxlY3QiLCJlcSIsImZpcm1faWQiLCJtYXliZVNpbmdsZSIsInN1Ym1pdHRlZF9hdCIsImpzb24iLCJsb2NrZWQiLCJ1cGRhdGVSb3ciLCJEYXRlIiwidG9JU09TdHJpbmciLCJrZXlzIiwiZXhpc3RpbmdQYXlsb2FkIiwicmF3X3BheWxvYWQiLCJuZXh0UGF5bG9hZCIsImludGFrZV9jaGFubmVsIiwibWF0dGVyX3R5cGUiLCJ1cmdlbmN5X2xldmVsIiwibGFuZ3VhZ2VfcHJlZmVyZW5jZSIsImRpc3BsYXlOYW1lIiwiY2xpZW50X2Rpc3BsYXlfbmFtZSIsInVwZGF0ZWQiLCJ1cGRhdGVFcnJvciIsInVwZGF0ZSIsImlzIiwibWVzc2FnZSIsImluY2x1ZGVzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/intake/submit.ts\n");

/***/ }),

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/../../node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fintake%2Fsubmit&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fintake%2Fsubmit.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();