"use strict";(()=>{var a={};a.id=592,a.ids=[592],a.modules={1046:(a,b,c)=>{c.d(b,{FS:()=>i,RE:()=>f,Y2:()=>j,at:()=>g,n4:()=>h});var d=c(5511),e=c.n(d);function f(a){let b=a.headers["x-request-id"]??a.headers["x-correlation-id"];if(Array.isArray(b)){let a=b.find(a=>a.trim());if(a)return a.trim()}return"string"==typeof b&&b.trim()?b.trim():e().randomUUID()}function g(a,b){let c=a.url?a.url.split("?")[0]:"";console.info(`[intake-api] ${a.method??"UNKNOWN"} ${c} requestId=${b}`)}function h(a,b,c,d,e){let f=e?` detail="${e}"`:"";return console.error(`[intake-api] requestId=${d} status=${b} message="${c}"${f}`),a.status(b).json({ok:!1,error:c,requestId:d})}function i(a,b,c,d){return!!a.method&&!!c.includes(a.method)||(b.setHeader("Allow",c),h(b,405,"Method not allowed",d),!1)}function j(a,b,c={}){let d=c.limitBytes??1048576,e=a.body??(c.allowEmpty?{}:void 0);if(void 0===e)return{ok:!1,status:400,error:"Request body required"};if("string"==typeof e){if(Buffer.byteLength(e,"utf8")>d)return{ok:!1,status:413,error:"Request body too large"};try{return{ok:!0,data:JSON.parse(e)}}catch{return{ok:!1,status:400,error:"Invalid JSON body"}}}return Buffer.byteLength(JSON.stringify(e),"utf8")>d?{ok:!1,status:413,error:"Request body too large"}:{ok:!0,data:e}}},3873:a=>{a.exports=require("path")},5511:a=>{a.exports=require("crypto")},5600:a=>{a.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},7789:(a,b,c)=>{c.r(b),c.d(b,{config:()=>w,default:()=>v,handler:()=>y});var d={};c.r(d),c.d(d,{default:()=>s});var e=c(1223),f=c(4600),g=c(4409),h=c(6440),i=c(9021),j=c.n(i),k=c(3873),l=c.n(k);let m={name:["county_name","name"],display:["county_display","display"],slug:["county_slug","slug"],fips:["county_fips","fips"]};function n(a){let b=[],c="",d=!1;for(let e=0;e<a.length;e+=1){let f=a[e];if('"'===f){let b=a[e+1];d&&'"'===b?(c+='"',e+=1):d=!d;continue}if(","===f&&!d){b.push(c),c="";continue}c+=f}return b.push(c),b}function o(a){return a.trim().toLowerCase()}function p(a,b){for(let c of b){let b=a.indexOf(c);if(b>=0)return b}return null}function q(a){return(a??"").trim()}var r=c(1046);function s(a,b){let c=(0,r.RE)(a);if((0,r.at)(a,c),(0,r.FS)(a,b,["GET"],c))try{let a=[...(function(a){let b=(void 0)??function(){for(let a of[l().resolve(process.cwd(),"docs","ga_counties.csv"),l().resolve(process.cwd(),"..","docs","ga_counties.csv"),l().resolve(process.cwd(),"..","..","docs","ga_counties.csv")])if(j().existsSync(a))return a;throw Error("Unable to locate docs/ga_counties.csv")}(),c=j().readFileSync(b,"utf8").split(/\r?\n/).filter(a=>a.trim().length>0);if(0===c.length)return[];let d=n(c[0]).map(o),e=p(d,m.name),f=p(d,m.display),g=p(d,m.slug),h=p(d,m.fips);if(null===e&&null===f&&null===g)throw Error("ga_counties.csv is missing a county name/slug column");let i=[];for(let a=1;a<c.length;a+=1){let b=n(c[a]),d=q(b[e??-1])||q(b[f??-1])||q(b[g??-1]),j=q(b[f??-1])||d,k=q(b[g??-1]),l=q(b[h??-1]);if(!d&&!j&&!k)continue;let m={name:d||j||k,display:j||d||k};k&&(m.slug=k),l&&(m.fips=l),i.push(m)}return i})().map(a=>({value:function(a){let b=a.slug?.trim();return b||a.name.trim()}(a),label:function(a){let b=a.display?.trim();if(b)return b;let c=a.name?.trim();return c||(a.slug?.trim()??"")}(a),slug:a.slug,fips:a.fips,name:a.name}))].sort((a,b)=>a.label.localeCompare(b.label,"en",{sensitivity:"base"}));return b.status(200).json({ok:!0,canonicalRule:"slug_preferred_name_fallback",counties:a})}catch(a){(0,r.n4)(b,500,"Unable to load counties",c);return}}var t=c(9275),u=c(879);let v=(0,h.M)(d,"default"),w=(0,h.M)(d,"config"),x=new g.PagesAPIRouteModule({definition:{kind:f.A.PAGES_API,page:"/api/intake/counties",pathname:"/api/intake/counties",bundlePath:"",filename:""},userland:d,distDir:".next",relativeProjectDir:""});async function y(a,b,c){let d=await x.prepare(a,b,{srcPage:"/api/intake/counties"});if(!d){b.statusCode=400,b.end("Bad Request"),null==c.waitUntil||c.waitUntil.call(c,Promise.resolve());return}let{query:f,params:g,prerenderManifest:h,routerServerContext:i}=d;try{let c=a.method||"GET",d=(0,t.getTracer)(),e=d.getActiveScopeSpan(),j=x.instrumentationOnRequestError.bind(x),k=async e=>x.render(a,b,{query:{...f,...g},params:g,allowedRevalidateHeaderKeys:[],multiZoneDraftMode:!1,trustHostHeader:!1,previewProps:h.preview,propagateError:!1,dev:x.isDev,page:"/api/intake/counties",internalRevalidate:null==i?void 0:i.revalidate,onError:(...b)=>j(a,...b)}).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let f=d.getRootSpanAttributes();if(!f)return;if(f.get("next.span_type")!==u.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${f.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let g=f.get("next.route");if(g){let a=`${c} ${g}`;e.setAttributes({"next.route":g,"http.route":g,"next.span_name":a}),e.updateName(a)}else e.updateName(`${c} ${a.url}`)});e?await k(e):await d.withPropagatedContext(a.headers,()=>d.trace(u.BaseServerSpan.handleRequest,{spanName:`${c} ${a.url}`,kind:t.SpanKind.SERVER,attributes:{"http.method":c,"http.target":a.url}},k))}catch(a){if(x.isDev)throw a;(0,e.sendError)(b,500,"Internal Server Error")}finally{null==c.waitUntil||c.waitUntil.call(c,Promise.resolve())}}},9021:a=>{a.exports=require("fs")}};var b=require("../../../webpack-api-runtime.js");b.C(a);var c=b.X(0,[929],()=>b(b.s=7789));module.exports=c})();